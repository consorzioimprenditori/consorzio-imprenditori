<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Consorzio App - Premium</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --lime: #ddfc1b;
            --lime-dark: #c5e000;
            --dark: #1a1a1a;
            --gray: #2d2d2d;
            --light-gray: #f5f5f5;
            --white: #ffffff;
            --success: #00d084;
            --danger: #ff3b3b;
            --warning: #ffc107;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--dark);
            color: var(--white);
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        .mobile-container {
            max-width: 100%;
            min-height: 100vh;
            background: var(--dark);
        }

        .top-bar {
            background: linear-gradient(135deg, var(--gray) 0%, var(--dark) 100%);
            padding: 15px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.5);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--lime);
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--white);
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .user-badge {
            background: var(--lime);
            color: var(--dark);
            padding: 10px 18px;
            border-radius: 25px;
            font-size: 15px;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(221, 252, 27, 0.3);
        }

        .page-content {
            padding: 20px 15px;
            min-height: calc(100vh - 140px);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .login-container {
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--dark) 0%, var(--gray) 100%);
        }

        .login-logo {
            width: 120px;
            height: 120px;
            background: var(--lime);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(221, 252, 27, 0.4);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .login-box {
            background: var(--gray);
            border-radius: 25px;
            padding: 30px 20px;
            width: 100%;
            max-width: 380px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
            border: 1px solid rgba(221, 252, 27, 0.2);
        }

        .login-title {
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 10px;
            color: var(--white);
        }

        .login-subtitle {
            font-size: 16px;
            text-align: center;
            color: #aaa;
            margin-bottom: 25px;
        }

        .role-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 25px;
            background: rgba(0,0,0,0.3);
            padding: 4px;
            border-radius: 15px;
        }

        .role-btn {
            flex: 1;
            padding: 14px;
            border: none;
            background: transparent;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            color: #aaa;
            cursor: pointer;
            transition: all 0.3s;
        }

        .role-btn.active {
            background: var(--lime);
            color: var(--dark);
            box-shadow: 0 4px 15px rgba(221, 252, 27, 0.4);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 15px;
            color: #aaa;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 16px;
            border: 2px solid rgba(221, 252, 27, 0.2);
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            font-size: 18px;
            color: var(--white);
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--lime);
            background: rgba(0,0,0,0.5);
            box-shadow: 0 0 20px rgba(221, 252, 27, 0.2);
        }

        .btn-login {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%);
            color: var(--dark);
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(221, 252, 27, 0.3);
        }

        .btn-login:active {
            transform: scale(0.98);
        }

        .stats-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--gray) 0%, rgba(45,45,45,0.7) 100%);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            border: 1px solid rgba(221, 252, 27, 0.2);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .stat-icon {
            font-size: 35px;
            margin-bottom: 10px;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.3));
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--lime);
            margin-bottom: 5px;
            text-shadow: 0 2px 10px rgba(221, 252, 27, 0.5);
        }

        .stat-label {
            font-size: 15px;
            color: #aaa;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .menu-card {
            background: linear-gradient(135deg, var(--gray) 0%, rgba(45,45,45,0.8) 100%);
            padding: 30px 20px;
            border-radius: 20px;
            text-align: center;
            border: 1px solid rgba(221, 252, 27, 0.2);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(221, 252, 27, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .menu-card:active {
            transform: scale(0.95);
        }

        .menu-card:active::before {
            opacity: 1;
        }

        .menu-icon {
            font-size: 45px;
            margin-bottom: 12px;
            filter: drop-shadow(0 3px 6px rgba(0,0,0,0.4));
        }

        .menu-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--white);
        }

        .menu-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--lime);
            color: var(--dark);
            font-size: 13px;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(221, 252, 27, 0.4);
        }

        .evento-card {
            background: linear-gradient(135deg, var(--gray) 0%, rgba(45,45,45,0.8) 100%);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(221, 252, 27, 0.2);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            position: relative;
        }

        .evento-card.confirmed {
            border-color: var(--lime);
            box-shadow: 0 5px 20px rgba(221, 252, 27, 0.2);
        }

        .evento-date {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .date-box {
            background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%);
            color: var(--dark);
            padding: 12px;
            border-radius: 15px;
            text-align: center;
            min-width: 65px;
            box-shadow: 0 4px 10px rgba(221, 252, 27, 0.3);
        }

        .date-box.confirmed {
            background: linear-gradient(135deg, var(--success) 0%, #00b371 100%);
            color: var(--white);
        }

        .date-day {
            font-size: 22px;
            font-weight: 700;
            line-height: 1;
        }

        .date-month {
            font-size: 11px;
            text-transform: uppercase;
            margin-top: 3px;
            font-weight: 600;
        }

        .evento-title {
            font-size: 19px;
            font-weight: 600;
            color: var(--white);
            margin-bottom: 5px;
        }

        .evento-info {
            margin-top: 12px;
            font-size: 16px;
            color: #aaa;
            line-height: 1.8;
        }

        .evento-participants {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(221, 252, 27, 0.1);
            font-size: 16px;
            color: var(--lime);
        }

        .btn-action {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            border: none;
            font-size: 17px;
            font-weight: 700;
            margin-top: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-confirm {
            background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%);
            color: var(--dark);
            box-shadow: 0 4px 15px rgba(221, 252, 27, 0.3);
        }

        .btn-cancel {
            background: linear-gradient(135deg, var(--danger) 0%, #d63333 100%);
            color: var(--white);
            box-shadow: 0 4px 15px rgba(255, 59, 59, 0.3);
        }

        .btn-action:active {
            transform: scale(0.98);
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, var(--gray) 0%, var(--dark) 100%);
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            padding: 10px 5px 15px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
            z-index: 100;
            border-top: 2px solid var(--lime);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 5px;
            cursor: pointer;
            transition: all 0.3s;
            color: #666;
            position: relative;
        }

        .nav-item.active {
            color: var(--lime);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 3px;
            background: var(--lime);
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(221, 252, 27, 0.5);
        }

        .nav-icon {
            font-size: 24px;
            margin-bottom: 4px;
            transition: all 0.3s;
            position: relative;
        }

        .nav-item.active .nav-icon {
            transform: scale(1.1);
            filter: drop-shadow(0 2px 5px rgba(221, 252, 27, 0.5));
        }

        .nav-label {
            font-size: 11px;
            font-weight: 600;
        }

        .toast {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gray);
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            animation: slideDown 0.3s ease;
            border: 1px solid rgba(221, 252, 27, 0.3);
        }

        .toast.success {
            border-color: var(--success);
            box-shadow: 0 5px 20px rgba(0, 208, 132, 0.2);
        }

        .toast.error {
            border-color: var(--danger);
            box-shadow: 0 5px 20px rgba(255, 59, 59, 0.2);
        }

        @keyframes slideDown {
            from {
                transform: translate(-50%, -100px);
                opacity: 0;
            }
            to {
                transform: translate(-50%, 0);
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                transform: translate(-50%, 0);
                opacity: 1;
            }
            to {
                transform: translate(-50%, -100px);
                opacity: 0;
            }
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--white);
            margin: 25px 0 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, var(--lime) 0%, transparent 100%);
        }
        .member-card {
            background: linear-gradient(135deg, var(--gray) 0%, rgba(45,45,45,0.8) 100%);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 12px;
            border: 1px solid rgba(221, 252, 27, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .member-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 700;
            color: var(--dark);
        }

        .member-info {
            flex: 1;
        }

        .member-name {
            font-size: 17px;
            font-weight: 600;
            color: var(--white);
            margin-bottom: 3px;
        }

        .member-company {
            font-size: 15px;
            color: #aaa;
        }

        .video-card {
            background: linear-gradient(135deg, var(--gray) 0%, rgba(45,45,45,0.8) 100%);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 15px;
            border: 1px solid rgba(221, 252, 27, 0.2);
        }

        .video-thumb {
            width: 100%;
            height: 180px;
            background: linear-gradient(135deg, rgba(221, 252, 27, 0.2) 0%, rgba(221, 252, 27, 0.05) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
        }

        .video-info {
            padding: 15px;
        }

        .video-title {
            font-size: 17px;
            font-weight: 600;
            color: var(--white);
            margin-bottom: 5px;
        }

        .video-meta {
            font-size: 15px;
            color: #aaa;
        }

        .logout-btn {
            background: rgba(255, 59, 59, 0.2);
            border: 1px solid rgba(255, 59, 59, 0.3);
            color: #ff6b6b;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .logout-btn:active {
            transform: scale(0.95);
        }

        .top-bar-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .home-btn {
            background: rgba(221, 252, 27, 0.2);
            border: 1px solid rgba(221, 252, 27, 0.3);
            color: var(--lime);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            text-decoration: none;
        }

        .home-btn:hover {
            background: rgba(221, 252, 27, 0.3);
            transform: scale(1.05);
        }

        .home-btn:active {
            transform: scale(0.95);
        }

        .add-annuncio-btn {
            background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%);
            color: var(--dark);
            padding: 14px 24px;
            border-radius: 15px;
            border: none;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(221, 252, 27, 0.3);
        }

        .add-annuncio-btn:active {
            transform: scale(0.98);
        }

        .annuncio-form {
            background: linear-gradient(135deg, var(--gray) 0%, rgba(45,45,45,0.8) 100%);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid var(--lime);
            display: none;
        }

        .annuncio-form.active {
            display: block;
        }

        .form-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        .form-select {
            width: 100%;
            padding: 16px;
            border: 2px solid rgba(221, 252, 27, 0.2);
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            font-size: 18px;
            color: var(--white);
            transition: all 0.3s;
            cursor: pointer;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--lime);
            background: rgba(0,0,0,0.5);
            box-shadow: 0 0 20px rgba(221, 252, 27, 0.2);
        }

        .form-textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid rgba(221, 252, 27, 0.2);
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            font-size: 18px;
            color: var(--white);
            transition: all 0.3s;
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .form-textarea:focus {
            outline: none;
            border-color: var(--lime);
            background: rgba(0,0,0,0.5);
            box-shadow: 0 0 20px rgba(221, 252, 27, 0.2);
        }

        .form-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-submit {
            flex: 1;
            padding: 16px;
            background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%);
            color: var(--dark);
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-cancel-form {
            flex: 1;
            padding: 16px;
            background: rgba(255, 59, 59, 0.2);
            color: #ff6b6b;
            border: 1px solid rgba(255, 59, 59, 0.3);
            border-radius: 12px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .annuncio-card {
            position: relative;
            padding-top: 20px;
            background: linear-gradient(135deg, rgba(45,45,45,0.95) 0%, rgba(30,30,30,0.9) 100%);
            border: 2px solid rgba(221, 252, 27, 0.15);
            overflow: visible;
        }

        .annuncio-card:hover {
            border-color: rgba(221, 252, 27, 0.3);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }

        .annuncio-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .annuncio-categoria-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%);
            color: var(--dark);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            box-shadow: 0 3px 10px rgba(221, 252, 27, 0.3);
        }

        .annuncio-controls {
            display: flex;
            gap: 8px;
            position: absolute;
            top: 15px;
            right: 15px;
        }

        .annuncio-delete-btn, .annuncio-edit-btn {
            width: 36px;
            height: 36px;
            border-radius: 12px;
            border: none;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .annuncio-delete-btn {
            background: linear-gradient(135deg, rgba(255, 59, 59, 0.9) 0%, rgba(220, 38, 38, 0.9) 100%);
            color: var(--white);
        }

        .annuncio-delete-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 59, 59, 0.4);
        }

        .annuncio-edit-btn {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.9) 0%, rgba(255, 160, 0, 0.9) 100%);
            color: var(--white);
        }

        .annuncio-edit-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.4);
        }

        .annuncio-content {
            padding: 0 5px;
        }

        .annuncio-title-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .annuncio-price-badge {
            background: rgba(221, 252, 27, 0.15);
            color: var(--lime);
            padding: 6px 14px;
            border-radius: 15px;
            font-size: 15px;
            font-weight: 700;
            border: 1px solid rgba(221, 252, 27, 0.3);
        }

        .annuncio-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(221, 252, 27, 0.1);
        }

        .annuncio-author {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #aaa;
            font-size: 14px;
        }

        .annuncio-time {
            color: #666;
            font-size: 13px;
            font-style: italic;
        }

        .nav-item.home {
            background: rgba(221, 252, 27, 0.1);
            border-radius: 15px;
        }

        .nav-item.home .nav-icon {
            color: var(--lime);
        }

        /* STILI CONSULENTI */
        .consulente-card {
            background: linear-gradient(135deg, var(--gray) 0%, rgba(45,45,45,0.8) 100%);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(221, 252, 27, 0.2);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }

        .consulente-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .consulente-avatar {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            font-weight: 700;
            color: var(--dark);
            box-shadow: 0 4px 10px rgba(221, 252, 27, 0.3);
        }

        .consulente-info {
            flex: 1;
        }

        .consulente-name {
            font-size: 20px;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 5px;
        }

        .consulente-specialization {
            font-size: 16px;
            color: var(--lime);
            margin-bottom: 3px;
        }

        .consulente-rating {
            font-size: 15px;
            color: #ffc107;
        }

        .consulente-bio {
            font-size: 15px;
            color: #aaa;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .consulente-availability {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .time-slot {
            background: rgba(221, 252, 27, 0.15);
            color: var(--lime);
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            border: 1px solid rgba(221, 252, 27, 0.3);
        }

        .btn-prenota {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%);
            color: var(--dark);
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(221, 252, 27, 0.3);
        }

        .btn-prenota:active {
            transform: scale(0.98);
        }

/* CONTINUA STILI CONSULENTI */
        .booking-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 200;
            padding: 20px;
            overflow-y: auto;
        }

        .booking-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .booking-content {
            background: var(--gray);
            border-radius: 25px;
            padding: 25px;
            width: 100%;
            max-width: 450px;
            border: 2px solid var(--lime);
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            position: relative;
        }

        .booking-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--lime);
            margin-bottom: 20px;
            text-align: center;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 59, 59, 0.2);
            border: 1px solid rgba(255, 59, 59, 0.3);
            color: #ff6b6b;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .close-modal:hover {
            transform: scale(1.1);
        }

        .consulenza-card {
            background: linear-gradient(135deg, var(--gray) 0%, rgba(45,45,45,0.8) 100%);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(221, 252, 27, 0.2);
            position: relative;
        }

        .consulenza-card.pending {
            border-color: var(--warning);
            box-shadow: 0 5px 20px rgba(255, 193, 7, 0.2);
        }

        .consulenza-card.confirmed {
            border-color: var(--lime);
            box-shadow: 0 5px 20px rgba(221, 252, 27, 0.2);
        }

        .consulenza-status {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
        }

        .consulenza-status.pending {
            background: var(--warning);
            color: var(--dark);
        }

        .consulenza-status.confirmed {
            background: var(--lime);
            color: var(--dark);
        }

        .consulenza-details {
            margin-top: 10px;
        }

        .consulenza-label {
            font-size: 14px;
            color: #888;
            margin-bottom: 3px;
        }

        .consulenza-value {
            font-size: 16px;
            color: var(--white);
            margin-bottom: 10px;
        }

        .consulenza-free-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--success) 0%, #00b371 100%);
            color: var(--white);
            padding: 6px 14px;
            border-radius: 15px;
            font-size: 14px;
            font-weight: 700;
            margin-top: 10px;
        }

        .consulenza-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .btn-modifica, .btn-conferma, .btn-cancella {
            flex: 1;
            min-width: 120px;
            padding: 12px;
            border-radius: 10px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-modifica {
            background: linear-gradient(135deg, #ffeb3b 0%, #ffc107 100%);
            color: #000;
            border: 2px solid #ff9800;
            box-shadow: 0 5px 20px rgba(255, 193, 7, 0.5);
            animation: subtlePulse 2s infinite;
            font-size: 16px !important;
            padding: 15px 20px !important;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-radius: 12px;
        }

        @keyframes subtlePulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 5px 20px rgba(255, 193, 7, 0.5);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 8px 30px rgba(255, 193, 7, 0.7);
            }
        }

        .btn-modifica:hover {
            animation: none;
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(255, 193, 7, 0.7);
            background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
            border-color: #ff6f00;
        }
        
        .btn-modifica:active {
            transform: scale(1.05);
        }

        .btn-conferma {
            background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%);
            color: var(--dark);
        }

        .btn-cancella {
            background: rgba(255, 59, 59, 0.2);
            color: #ff6b6b;
            border: 1px solid rgba(255, 59, 59, 0.3);
        }

        .whatsapp-sent {
            background: rgba(37, 211, 102, 0.15);
            border: 1px solid rgba(37, 211, 102, 0.3);
            color: #25d366;
            padding: 10px 15px;
            border-radius: 12px;
            font-size: 14px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .time-warning {
            background: rgba(255, 193, 7, 0.15);
            border: 1px solid rgba(255, 193, 7, 0.3);
            color: var(--warning);
            padding: 10px 15px;
            border-radius: 12px;
            font-size: 14px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
    </style>
</head>
<body>
    <div class="mobile-container">
        <!-- Login Page -->
        <div id="loginPage" class="page active">
            <div class="login-container">
                <div class="login-logo">üè¢</div>
                
                <div class="login-box">
                    <h1 class="login-title">Consorzio Imprenditori</h1>
                    <p class="login-subtitle">Accedi alla piattaforma premium</p>
                    
                    <div class="role-selector">
                        <button type="button" class="role-btn active" onclick="selectRole('admin', this)">Admin</button>
                        <button type="button" class="role-btn" onclick="selectRole('member', this)">Membro</button>
                        <button type="button" class="role-btn" onclick="selectRole('consulente', this)">Consulente</button>
                    </div>

                    <div id="loginForm">
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" id="loginEmail" value="admin@consorzio.it" placeholder="Inserisci email">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-input" id="loginPassword" value="admin123" placeholder="Inserisci password">
                        </div>
                        
                        <button type="button" class="btn-login" onclick="doLogin()">ACCEDI</button>
                    </div>
                </div>
            </div>
        </div>

<!-- Dashboard Page (Home) -->
        <div id="dashboardPage" class="page">
            <div class="top-bar">
                <div class="page-title">Dashboard</div>
                <div class="top-bar-controls">
                    <div class="user-badge" id="userBadge">Admin</div>
                    <button type="button" class="logout-btn" onclick="logout()">Esci</button>
                </div>
            </div>

            <div class="page-content">
                <div class="stats-row">
                    <div class="stat-card" style="grid-column: 1 / -1;">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-value" id="statEventi">1</div>
                        <div class="stat-label">Eventi Confermati</div>
                    </div>
                </div>

                <div class="section-title">Accesso Rapido</div>
                
                <div class="menu-grid">
                    <div class="menu-card" onclick="goToPage('bacheca')">
                        <span class="menu-badge">4</span>
                        <div class="menu-icon">üìå</div>
                        <div class="menu-title">Bacheca</div>
                    </div>
                    
                    <div class="menu-card" onclick="goToPage('eventi')">
                        <span class="menu-badge">20</span>
                        <div class="menu-icon">üìÖ</div>
                        <div class="menu-title">Eventi</div>
                    </div>
                    
                    <div class="menu-card" onclick="goToPage('membri')">
                        <span class="menu-badge">15</span>
                        <div class="menu-icon">üë•</div>
                        <div class="menu-title">Membri</div>
                    </div>

                    <div class="menu-card" onclick="goToPage('video')">
                        <span class="menu-badge">12</span>
                        <div class="menu-icon">üìπ</div>
                        <div class="menu-title">Video</div>
                    </div>

                    <div class="menu-card" onclick="goToPage('convenzioni')">
                        <span class="menu-badge">5</span>
                        <div class="menu-icon">ü§ù</div>
                        <div class="menu-title">Convenzioni</div>
                    </div>

                    <div class="menu-card" onclick="goToPage('consulenti')">
                        <span class="menu-badge">20</span>
                        <div class="menu-icon">üíº</div>
                        <div class="menu-title">Consulenti</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bacheca Page -->
        <div id="bachecaPage" class="page">
            <div class="top-bar">
                <div class="page-title">Bacheca</div>
                <div class="top-bar-controls">
                    <button type="button" class="home-btn" onclick="goToPage('dashboard')">üè† Home</button>
                    <div class="user-badge">User</div>
                </div>
            </div>

            <div class="page-content">
                <button type="button" class="add-annuncio-btn" id="addAnnuncioBtn" onclick="toggleAnnuncioForm()" style="display: none;">
                    <span>‚ûï</span>
                    <span>Pubblica Annuncio</span>
                </button>

                <div class="annuncio-form" id="annuncioForm">
                    <h3 style="color: var(--lime); margin-bottom: 20px;">üìù Nuovo Annuncio</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Titolo</label>
                        <input type="text" class="form-input" id="annuncioTitolo" placeholder="Es: Vendo stampante HP">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Categoria</label>
                            <select class="form-select" id="annuncioCategoria">
                                <option value="üîß">üîß Vendita</option>
                                <option value="üë®‚Äçüíª">üë®‚Äçüíª Lavoro</option>
                                <option value="üè¢">üè¢ Immobili</option>
                                <option value="ü§ù">ü§ù Partnership</option>
                                <option value="üìö">üìö Formazione</option>
                                <option value="üéØ">üéØ Servizi</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Prezzo/Budget</label>
                            <input type="text" class="form-input" id="annuncioPrezzo" placeholder="Es: ‚Ç¨1.200">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Descrizione</label>
                        <textarea class="form-textarea" id="annuncioDescrizione" placeholder="Descrivi il tuo annuncio..."></textarea>
                    </div>

                    <div class="form-buttons">
                        <button type="button" class="btn-submit" onclick="pubblicaAnnuncio()">Pubblica</button>
                        <button type="button" class="btn-cancel-form" onclick="toggleAnnuncioForm()">Annulla</button>
                    </div>
                </div>

                <div class="section-title">Ultimi Annunci</div>
                <div id="listaAnnunci"></div>
            </div>
        </div>

        <!-- Eventi Page -->
        <div id="eventiPage" class="page">
            <div class="top-bar">
                <div class="page-title">Agenda Eventi</div>
                <div class="top-bar-controls">
                    <button type="button" class="home-btn" onclick="goToPage('dashboard')">üè† Home</button>
                    <div class="user-badge">User</div>
                </div>
            </div>

            <div class="page-content">
                <div class="stats-row">
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value" id="eventiConfermati">1</div>
                        <div class="stat-label">Confermati</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üîî</div>
                        <div class="stat-value" id="notificheAttive">1</div>
                        <div class="stat-label">Notifiche Attive</div>
                    </div>
                </div>

                <div class="section-title">Prossimi Eventi</div>
                <div id="listaEventi"></div>
            </div>
        </div>

        <!-- Membri Page -->
        <div id="membriPage" class="page">
            <div class="top-bar">
                <div class="page-title">Membri</div>
                <div class="top-bar-controls">
                    <button type="button" class="home-btn" onclick="goToPage('dashboard')">üè† Home</button>
                    <div class="user-badge">User</div>
                </div>
            </div>

            <div class="page-content">
                <div class="section-title">Membri del Consorzio</div>

                <div class="member-card">
                    <div class="member-avatar">MR</div>
                    <div class="member-info">
                        <div class="member-name">Marco Rossi</div>
                        <div class="member-company">Rossi Srl - Import/Export</div>
                    </div>
                </div>

                <div class="member-card">
                    <div class="member-avatar">GB</div>
                    <div class="member-info">
                        <div class="member-name">Giulia Bianchi</div>
                        <div class="member-company">Tech Solutions - Software</div>
                    </div>
                </div>

                <div class="member-card">
                    <div class="member-avatar">LV</div>
                    <div class="member-info">
                        <div class="member-name">Luca Verdi</div>
                        <div class="member-company">Green Energy - Rinnovabili</div>
                    </div>
                </div>

                <div class="member-card">
                    <div class="member-avatar">SC</div>
                    <div class="member-info">
                        <div class="member-name">Sara Conti</div>
                        <div class="member-company">Conti Design - Architettura</div>
                    </div>
                </div>

                <div class="member-card">
                    <div class="member-avatar">AF</div>
                    <div class="member-info">
                        <div class="member-name">Andrea Ferrari</div>
                        <div class="member-company">Ferrari Consulting - Business</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Video Page -->
        <div id="videoPage" class="page">
            <div class="top-bar">
                <div class="page-title">Video Formativi</div>
                <div class="top-bar-controls">
                    <button type="button" class="home-btn" onclick="goToPage('dashboard')">üè† Home</button>
                    <div class="user-badge">User</div>
                </div>
            </div>

            <div class="page-content">
                <div class="section-title">Ultimi Video</div>

                <div class="video-card">
                    <div class="video-thumb">üìπ</div>
                    <div class="video-info">
                        <div class="video-title">Come accedere ai fondi europei 2025</div>
                        <div class="video-meta">Dott. Bianchi ‚Ä¢ 45 min ‚Ä¢ 2 giorni fa</div>
                    </div>
                </div>

                <div class="video-card">
                    <div class="video-thumb">üìπ</div>
                    <div class="video-info">
                        <div class="video-title">Digital Marketing per PMI</div>
                        <div class="video-meta">Prof. Rossi ‚Ä¢ 30 min ‚Ä¢ 1 settimana fa</div>
                    </div>
                </div>

                <div class="video-card">
                    <div class="video-thumb">üìπ</div>
                    <div class="video-info">
                        <div class="video-title">GDPR: Guida Pratica 2025</div>
                        <div class="video-meta">Avv. Verdi ‚Ä¢ 60 min ‚Ä¢ 2 settimane fa</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Convenzioni Page -->
        <div id="convenzioniPage" class="page">
            <div class="top-bar">
                <div class="page-title">Convenzioni</div>
                <div class="top-bar-controls">
                    <button type="button" class="home-btn" onclick="goToPage('dashboard')">üè† Home</button>
                    <div class="user-badge">User</div>
                </div>
            </div>

            <div class="page-content">
                <div class="section-title">Convenzioni Attive</div>

                <div class="evento-card">
                    <div class="evento-title">üè® Hotel Business Roma</div>
                    <div class="evento-info">
                        Sconto 30% su pernottamenti<br>
                        ‚úÖ Valida tutto l'anno<br>
                        üìç 3 strutture convenzionate
                    </div>
                </div>

                <div class="evento-card">
                    <div class="evento-title">‚úàÔ∏è Corporate Travel</div>
                    <div class="evento-info">
                        Voli aziendali -25% su tariffe flex<br>
                        ‚úÖ Partnership con 5 compagnie<br>
                        üé´ Codice: CONSORZIO2025
                    </div>
                </div>

                <div class="evento-card">
                    <div class="evento-title">üöó Noleggio Fleet Manager</div>
                    <div class="evento-info">
                        Noleggio lungo termine vantaggioso<br>
                        ‚úÖ Risparmio fino a ‚Ç¨200/mese<br>
                        üìû Consulente dedicato
                    </div>
                </div>
            </div>
        </div>

        <!-- Consulenti Page -->
        <div id="consulentiPage" class="page">
            <div class="top-bar">
                <div class="page-title">Consulenti</div>
                <div class="top-bar-controls">
                    <button type="button" class="home-btn" onclick="goToPage('dashboard')">üè† Home</button>
                    <div class="user-badge">User</div>
                </div>
            </div>

            <div class="page-content">
                <!-- Dashboard Consulente - AGGIUNGI QUESTO -->
<div id="dashboardConsulente" style="display: none;">
    <!-- Benvenuto e Stats Base -->
    <div class="consulente-welcome-card" style="background: linear-gradient(135deg, var(--lime) 0%, var(--lime-dark) 100%); border-radius: 20px; padding: 20px; margin-bottom: 20px; color: var(--dark);">
        <h2 style="margin: 0; font-size: 24px;">üëã Benvenuto/a Maria!</h2>
        <p style="margin: 10px 0 0 0; font-size: 16px;">Hai <strong>2 consulenze</strong> questa settimana</p>
    </div>

    <!-- Sezione Porta Nuovi Membri -->
    <div class="bring-members-section" style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); border-radius: 20px; padding: 25px; margin-bottom: 20px; color: white;">
        <h3 style="margin: 0 0 15px 0; font-size: 20px;">üí∞ Porta Nuovi Membri!</h3>
        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 15px; margin-bottom: 15px;">
            <p style="margin: 0; font-size: 18px; font-weight: bold;">üéØ Per ogni nuovo membro che entra grazie a te:</p>
            <p style="margin: 10px 0 0 0; font-size: 24px; font-weight: bold;">-200‚Ç¨ sulla tua quota annuale!</p>
            <p style="margin: 5px 0 0 0; font-size: 14px;">Quota attuale: ‚Ç¨1.800/anno ‚Üí Potenziale: ‚Ç¨1.600, ‚Ç¨1.400...</p>
        </div>
        <button type="button" class="btn-action" style="background: white; color: #4CAF50; font-weight: bold;" onclick="openSuggestMember()">
            ‚ûï Suggerisci Nuovo Membro
        </button>
    </div>

    <!-- Feedback Ultima Riunione -->
    <div class="feedback-section" style="background: linear-gradient(135deg, var(--gray) 0%, rgba(45,45,45,0.8) 100%); border-radius: 20px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(221, 252, 27, 0.2);">
        <h3 style="color: var(--lime); margin: 0 0 15px 0;">üìù Feedback Ultima Riunione (28 Gen)</h3>
        <div id="feedbackForm">
            <div class="form-group">
                <label class="form-label">Valutazione Generale</label>
                <select class="form-select" id="ratingRiunione">
                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Eccellente</option>
                    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Molto Buona</option>
                    <option value="3">‚≠ê‚≠ê‚≠ê Buona</option>
                    <option value="2">‚≠ê‚≠ê Migliorabile</option>
                    <option value="1">‚≠ê Da Rivedere</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Cosa Migliorare? (Obbligatorio)</label>
                <textarea class="form-textarea" id="feedbackMiglioramenti" placeholder="Suggerisci almeno un miglioramento..." required></textarea>
            </div>
            <button type="button" class="btn-submit" onclick="inviaFeedback()">Invia Feedback</button>
        </div>
    </div>

    <!-- Proponi Argomenti -->
    <div class="suggest-topics-section" style="background: linear-gradient(135deg, var(--gray) 0%, rgba(45,45,45,0.8) 100%); border-radius: 20px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(221, 252, 27, 0.2);">
        <h3 style="color: var(--lime); margin: 0 0 15px 0;">üí° Proponi Argomenti per Prossime Riunioni</h3>
        <div class="form-group">
            <input type="text" class="form-input" id="topicTitle" placeholder="Titolo argomento...">
        </div>
        <div class="form-group">
            <textarea class="form-textarea" id="topicDescription" placeholder="Descrivi brevemente l'argomento e perch√© √® importante..."></textarea>
        </div>
        <button type="button" class="btn-action btn-confirm" onclick="proponiArgomento()">Proponi Argomento</button>
    </div>

    <!-- Le Mie Consulenze -->
    <div class="section-title">üìÖ Le Mie Consulenze</div>
    <div id="consulenzeConsulente"></div>
</div>
                <div id="mieConsulenze" style="display: none;">
                    <div class="section-title">Le Mie Consulenze</div>
                    <div id="listaConsulenze"></div>
                </div>

                <div id="listaConsulenti">
                    <div class="section-title">Consulenti Disponibili</div>
                    <!-- il tuo testo -->
                   <!-- üí∞ Sviluppo Finanziario -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">MB</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Marco Bertolini</div>
                                <div class="consulente-specialization">üí∞ Sviluppo Finanziario</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.9</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Esperto in pianificazione finanziaria aziendale e strategie di investimento. 
                            20+ anni nel settore bancario e finanziario.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Ven</span>
                            <span class="time-slot">‚è∞ 9:00-18:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Marco Bertolini', 'Sviluppo Finanziario')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- ‚ö° Risparmio Energetico -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">LR</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Luca Rinaldi</div>
                                <div class="consulente-specialization">‚ö° Risparmio Energetico</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.8</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Specialista in efficienza energetica e riduzione costi aziendali.
                            Certificato Energy Manager.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Gio</span>
                            <span class="time-slot">‚è∞ 10:00-17:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Luca Rinaldi', 'Risparmio Energetico')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üìê Servizi Tecnici -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">GC</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Giuseppe Colombo</div>
                                <div class="consulente-specialization">üìê Servizi Tecnici</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Ingegnere civile con expertise in progettazione e consulenza tecnica.
                            Specializzato in normative edilizie e sicurezza.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Mar-Ven</span>
                            <span class="time-slot">‚è∞ 8:00-16:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Giuseppe Colombo', 'Servizi Tecnici')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üìà Servizi di Marketing -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">SC</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Sofia Carli</div>
                                <div class="consulente-specialization">üìà Servizi di Marketing</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.9</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Digital Marketing Expert con focus su strategie di crescita online.
                            Certificata Google Ads e Meta Business.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Ven</span>
                            <span class="time-slot">‚è∞ 9:00-17:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Sofia Carli', 'Servizi di Marketing')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üìã Finanza Agevolata e Bandi -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">AF</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Anna Fontana</div>
                                <div class="consulente-specialization">üìã Finanza Agevolata e Bandi</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.8</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Esperta in bandi europei, nazionali e regionali. 
                            Tasso di successo 85% nelle richieste gestite.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Mer</span>
                            <span class="time-slot">‚è∞ 10:00-18:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Anna Fontana', 'Finanza Agevolata e Bandi')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üìä Controllo di Gestione -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">RM</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Roberto Marini</div>
                                <div class="consulente-specialization">üìä Controllo di Gestione</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.7</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Controller certificato con esperienza in analisi dei costi e KPI aziendali.
                            Specializzato in reporting e budgeting.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Mar-Gio</span>
                            <span class="time-slot">‚è∞ 9:00-17:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Roberto Marini', 'Controllo di Gestione')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üßÆ Consulto Contabile -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">PB</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Paola Benedetti</div>
                                <div class="consulente-specialization">üßÆ Consulto Contabile</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Dottore commercialista con 15+ anni di esperienza.
                            Esperta in contabilit√† aziendale e bilanci.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Ven</span>
                            <span class="time-slot">‚è∞ 8:30-17:30</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Paola Benedetti', 'Consulto Contabile')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üîç SEO e Posizionamento Online -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">DV</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Davide Vitali</div>
                                <div class="consulente-specialization">üîç SEO e Posizionamento Online</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.9</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            SEO Specialist con track record di prima pagina Google.
                            Esperto in local SEO e e-commerce.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Ven</span>
                            <span class="time-slot">‚è∞ 10:00-19:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Davide Vitali', 'SEO e Posizionamento Online')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- ‚öñÔ∏è Gruppo Acquisto Energetico -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">FG</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Francesca Galli</div>
                                <div class="consulente-specialization">‚öñÔ∏è Gruppo Acquisto Energetico</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.8</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Coordinatrice gruppi d'acquisto con risparmio medio 30% su forniture.
                            Gestisce oltre 200 aziende consorziate.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Mer</span>
                            <span class="time-slot">‚è∞ 9:00-16:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Francesca Galli', 'Gruppo Acquisto Energetico')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üìë Controllo Tributario -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">MR</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Massimo Romano</div>
                                <div class="consulente-specialization">üìë Controllo Tributario</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.7</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Tributarista specializzato in ottimizzazione fiscale e tax planning.
                            Ex funzionario Agenzia Entrate.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Mar-Gio</span>
                            <span class="time-slot">‚è∞ 14:00-18:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Massimo Romano', 'Controllo Tributario')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üñ®Ô∏è Tipografia Digitale -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">ST</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Simone Testa</div>
                                <div class="consulente-specialization">üñ®Ô∏è Tipografia Digitale</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.9</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Esperto in soluzioni di stampa digitale e packaging personalizzato.
                            Partnership con le migliori tipografie italiane.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Ven</span>
                            <span class="time-slot">‚è∞ 8:00-17:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Simone Testa', 'Tipografia Digitale')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üîí Cyber Sicurezza -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">LN</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Lorenzo Neri</div>
                                <div class="consulente-specialization">üîí Cyber Sicurezza</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Ethical Hacker certificato CEH. Specialista in protezione dati e GDPR.
                            Penetration testing e vulnerability assessment.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Ven</span>
                            <span class="time-slot">‚è∞ 9:00-18:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Lorenzo Neri', 'Cyber Sicurezza')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üì± Reti Telefoniche -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">EC</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Elena Costa</div>
                                <div class="consulente-specialization">üì± Reti Telefoniche</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.8</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Consulente telecomunicazioni business con accordi esclusivi operatori.
                            Risparmio medio 40% su telefonia aziendale.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Gio</span>
                            <span class="time-slot">‚è∞ 10:00-17:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Elena Costa', 'Reti Telefoniche')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üì¢ Agenda di Comunicazione -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">VB</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Valentina Bruni</div>
                                <div class="consulente-specialization">üì¢ Agenda di Comunicazione</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.9</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Stratega della comunicazione con esperienza in PR e media relations.
                            Gestione crisi e brand reputation.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Ven</span>
                            <span class="time-slot">‚è∞ 9:00-18:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Valentina Bruni', 'Agenda di Comunicazione')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üå± Efficientamento Energetico -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">AG</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Andrea Grassi</div>
                                <div class="consulente-specialization">üå± Efficientamento Energetico</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.8</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Ingegnere energetico specializzato in sostenibilit√† e rinnovabili.
                            Certificatore energetico accreditato.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Mar-Ven</span>
                            <span class="time-slot">‚è∞ 8:00-16:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Andrea Grassi', 'Efficientamento Energetico')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üè¢ Gestioni Aziendali -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">CB</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Chiara Barbieri</div>
                                <div class="consulente-specialization">üè¢ Gestioni Aziendali</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Business consultant con MBA. Specializzata in ristrutturazioni aziendali 
                            e ottimizzazione processi.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Gio</span>
                            <span class="time-slot">‚è∞ 9:00-17:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Chiara Barbieri', 'Gestioni Aziendali')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üíª Creazione App e Siti -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">MT</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Matteo Torrisi</div>
                                <div class="consulente-specialization">üíª Creazione App e Siti</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.9</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Full-stack developer con portfolio di 100+ progetti.
                            Specializzato in e-commerce e app mobile.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Ven</span>
                            <span class="time-slot">‚è∞ 10:00-19:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Matteo Torrisi', 'Creazione App e Siti')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üñ®Ô∏è Noleggio Stampanti -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">RP</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Riccardo Pellegrini</div>
                                <div class="consulente-specialization">üñ®Ô∏è Noleggio Stampanti</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.7</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Consulente office automation con soluzioni di noleggio personalizzate.
                            Partner dei maggiori brand di stampa.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Mer</span>
                            <span class="time-slot">‚è∞ 9:00-17:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Riccardo Pellegrini', 'Noleggio Stampanti')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- ‚öôÔ∏è Sicurezza Macchinari -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">GS</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Giorgio Santini</div>
                                <div class="consulente-specialization">‚öôÔ∏è Sicurezza Macchinari</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Ingegnere meccanico esperto in certificazioni CE e sicurezza macchine.
                            Valutazione rischi e conformit√† normative.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Mar-Gio</span>
                            <span class="time-slot">‚è∞ 8:00-16:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Giorgio Santini', 'Sicurezza Macchinari')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>

                    <!-- üè• Medicina del Lavoro -->
                    <div class="consulente-card">
                        <div class="consulente-header">
                            <div class="consulente-avatar">DF</div>
                            <div class="consulente-info">
                                <div class="consulente-name">Dott.ssa Daniela Fiore</div>
                                <div class="consulente-specialization">üè• Medicina del Lavoro</div>
                                <div class="consulente-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</div>
                            </div>
                        </div>
                        <div class="consulente-bio">
                            Medico del lavoro con specializzazione in prevenzione e sicurezza.
                            Gestione sorveglianza sanitaria e DVR.
                        </div>
                        <div class="consulente-availability">
                            <span class="time-slot">üóìÔ∏è Lun-Ven</span>
                            <span class="time-slot">‚è∞ 8:00-17:00</span>
                            <span class="time-slot">üíö Disponibile</span>
                        </div>
                        <button type="button" class="btn-prenota" onclick="openBookingModal('Dott.ssa Daniela Fiore', 'Medicina del Lavoro')">
                            üìÖ Prenota Consulenza Gratuita
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Booking Modal -->
        <div id="bookingModal" class="booking-modal">
            <div class="booking-content">
                <span class="close-modal" onclick="closeBookingModal()">‚úï</span>
                <h3 class="booking-title">üìÖ Prenota Consulenza</h3>
                
                <div class="form-group">
                    <label class="form-label">Consulente</label>
                    <input type="text" class="form-input" id="bookingConsulente" readonly>
                </div>

                <div class="form-group">
                    <label class="form-label">Specializzazione</label>
                    <input type="text" class="form-input" id="bookingSpec" readonly>
                </div>

                <div class="form-group">
                    <label class="form-label">Data</label>
                    <input type="date" class="form-input" id="bookingDate">
                </div>

                <div class="form-group">
                    <label class="form-label">Ora</label>
                    <select class="form-select" id="bookingTime">
                        <option value="09:00">09:00</option>
                        <option value="10:00">10:00</option>
                        <option value="11:00">11:00</option>
                        <option value="12:00">12:00</option>
                        <option value="14:00">14:00</option>
                        <option value="15:00">15:00</option>
                        <option value="16:00">16:00</option>
                        <option value="17:00">17:00</option>
                        <option value="18:00">18:00</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Argomento</label>
                    <textarea class="form-textarea" id="bookingTopic" placeholder="Descrivi brevemente l'argomento della consulenza..."></textarea>
                </div>

                <div style="background: rgba(221, 252, 27, 0.1); padding: 12px; border-radius: 10px; margin-bottom: 15px; border: 1px solid rgba(221, 252, 27, 0.3);">
                    <p style="color: var(--lime); font-size: 14px; margin: 0;">
                        ‚ú® <strong>Prima consulenza GRATUITA</strong> per i membri del consorzio
                    </p>
                </div>

                <div style="background: rgba(255, 193, 7, 0.1); padding: 12px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(255, 193, 7, 0.3);">
                    <p style="color: var(--warning); font-size: 13px; margin: 0;">
                        ‚ö†Ô∏è Potrai modificare o cancellare fino a 24 ore prima dell'appuntamento
                    </p>
                </div>

                <div class="form-buttons">
                    <button type="button" class="btn-submit" onclick="confermaPrenotazione()">Invia Richiesta</button>
                    <button type="button" class="btn-cancel-form" onclick="closeBookingModal()">Annulla</button>
                </div>
            </div>
        </div>
<!-- Modal Suggerisci Membro - AGGIUNGI QUESTO -->
<div id="suggestMemberModal" class="booking-modal">
    <div class="booking-content">
        <span class="close-modal" onclick="closeSuggestMember()">‚úï</span>
        <h3 class="booking-title" style="color: #4CAF50;">üí∞ Suggerisci Nuovo Membro</h3>
        
        <div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 10px; margin-bottom: 15px;">
            <p style="color: #4CAF50; font-size: 14px; margin: 0;">
                ‚ú® Riceverai <strong>-‚Ç¨200</strong> sulla tua quota annuale per ogni membro che si iscrive!
            </p>
        </div>
        
        <div class="form-group">
            <label class="form-label">Nome Azienda/Professionista</label>
            <input type="text" class="form-input" id="suggestNome" placeholder="Es: Rossi Srl">
        </div>
        
        <div class="form-group">
            <label class="form-label">Referente</label>
            <input type="text" class="form-input" id="suggestReferente" placeholder="Es: Mario Rossi">
        </div>
        
        <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" class="form-input" id="suggestEmail" placeholder="email@azienda.it">
        </div>
        
        <div class="form-group">
            <label class="form-label">Telefono</label>
            <input type="tel" class="form-input" id="suggestTelefono" placeholder="+39 333 1234567">
        </div>
        
        <div class="form-group">
            <label class="form-label">Settore</label>
            <input type="text" class="form-input" id="suggestSettore" placeholder="Es: Import/Export">
        </div>
        
        <div class="form-group">
            <label class="form-label">Note</label>
            <textarea class="form-textarea" id="suggestNote" placeholder="Perch√© sarebbe un buon membro del consorzio?"></textarea>
        </div>
        
        <div class="form-buttons">
            <button type="button" class="btn-submit" onclick="inviaSuggerimento()">Invia Suggerimento</button>
            <button type="button" class="btn-cancel-form" onclick="closeSuggestMember()">Annulla</button>
        </div>
    </div>
</div>
        <!-- Bottom Navigation -->
        <div class="bottom-nav" id="bottomNav" style="display: none;">
            <div class="nav-item home" onclick="goToPage('dashboard')">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item active" onclick="goToPage('bacheca')">
                <div class="nav-icon">üìå</div>
                <div class="nav-label">Bacheca</div>
            </div>
            <div class="nav-item" onclick="goToPage('eventi')">
                <div class="nav-icon">üìÖ</div>
                <div class="nav-label">Eventi</div>
            </div>
            <div class="nav-item" onclick="goToPage('membri')">
                <div class="nav-icon">üë•</div>
                <div class="nav-label">Membri</div>
            </div>
            <div class="nav-item" onclick="goToPage('video')">
                <div class="nav-icon">üìπ</div>
                <div class="nav-label">Video</div>
            </div>
            <div class="nav-item" onclick="goToPage('convenzioni')">
                <div class="nav-icon">ü§ù</div>
                <div class="nav-label">Convenzioni</div>
            </div>
            <div class="nav-item" onclick="goToPage('consulenti')">
                <div class="nav-icon">üíº</div>
                <div class="nav-label">Consulenti</div>
            </div>
        </div>
    </div>

    <script>
        // Variabili globali
        let currentUser = null;
        let currentRole = 'admin';
        let eventiPartecipazioni = {2: true};
        let partecipantiBase = {1: 45, 2: 31};
        let editingAnnuncioId = null;
      let consulenze = [
    {
        id: 100,
        consulente: 'Maria Bianchi',
        membro: 'Tu',
        data: '2025-08-28',
        ora: '10:00',
        argomento: 'Strategie di accesso ai fondi europei per PMI',
        status: 'pending',
        propostaData: null,
        propostaOra: null,
        propostaDa: null
    },
           
            {
        id: 101,
        consulente: 'Maria Bianchi',
        membro: 'Marco Rossi',
        data: '2025-08-26',
        ora: '14:00',
        argomento: 'Business plan per espansione internazionale',
        status: 'confirmed',
        propostaData: null,
        propostaOra: null,
        propostaDa: null
    }
        ];
        let nextConsulenzaId = 102;
        let primaConsulenzaUsata = {};
        
        let annunci = [
            {
                id: 1,
                categoria: 'üîß',
                titolo: 'Stampante HP LaserJet Pro',
                descrizione: 'Vendo stampante professionale in ottime condizioni',
                prezzo: '‚Ç¨1.200 trattabili',
                autore: 'Marco Rossi',
                autoreRole: 'member',
                data: '2 ore fa'
            },
            {
                id: 2,
                categoria: 'üë®‚Äçüíª',
                titolo: 'Cerco Sviluppatore Full Stack',
                descrizione: 'React/Node.js - Contratto indeterminato',
                prezzo: '‚Ç¨45-55K/anno + benefits',
                autore: 'Tech Solutions Srl',
                autoreRole: 'admin',
                data: 'oggi'
            },
            {
                id: 3,
                categoria: 'üè¢',
                titolo: 'Ufficio in Condivisione EUR',
                descrizione: '150mq open space, 15 postazioni',
                prezzo: '‚Ç¨2.500/mese tutto incluso',
                autore: 'Business Center Roma',
                autoreRole: 'member',
                data: 'ieri'
            },
            {
                id: 4,
                categoria: 'ü§ù',
                titolo: 'Partner per Progetto E-commerce',
                descrizione: 'Cerco socio investitore per marketplace',
                prezzo: 'Investment: ‚Ç¨50K',
                autore: 'Digital Ventures',
                autoreRole: 'member',
                data: '3 giorni fa'
            }
        ];
        let nextAnnuncioId = 5;

        const credentials = {
            admin: { email: 'admin@consorzio.it', password: 'admin123', label: 'Admin' },
            member: { email: 'rossi@rossisrl.it', password: 'member123', label: 'Membro' },
consulente: { email: 'maria.bianchi@consorzio.it', password: 'cons123', label: 'Maria Bianchi' },
consulente2: { email: 'luca.rinaldi@consorzio.it', password: 'cons456', label: 'Luca Rinaldi' }
};

        // Funzioni Annunci
        window.eliminaAnnuncio = function(id) {
            if (confirm('Vuoi eliminare questo annuncio?')) {
                annunci = annunci.filter(a => a.id !== id);
                renderAnnunci();
                showToast('‚úÖ Annuncio eliminato con successo!', 'success');
            }
        };

        window.modificaAnnuncio = function(id) {
            toggleAnnuncioForm(id);
        };

        window.pubblicaAnnuncio = function() {
            const titolo = document.getElementById('annuncioTitolo').value.trim();
            const descrizione = document.getElementById('annuncioDescrizione').value.trim();
            const prezzo = document.getElementById('annuncioPrezzo').value.trim();
            const categoria = document.getElementById('annuncioCategoria').value;
            
            if (!titolo || !descrizione) {
                showToast('‚ö†Ô∏è Compila tutti i campi obbligatori', 'error');
                return;
            }
            
            if (editingAnnuncioId) {
                const annuncioIndex = annunci.findIndex(a => a.id === editingAnnuncioId);
                if (annuncioIndex !== -1) {
                    annunci[annuncioIndex] = {
                        ...annunci[annuncioIndex],
                        categoria: categoria,
                        titolo: titolo,
                        descrizione: descrizione,
                        prezzo: prezzo,
                        data: 'modificato ora'
                    };
                    showToast('‚úÖ Annuncio modificato con successo!', 'success');
                }
                editingAnnuncioId = null;
            } else {
                const nuovoAnnuncio = {
                    id: nextAnnuncioId++,
                    categoria: categoria,
                    titolo: titolo,
                    descrizione: descrizione,
                    prezzo: prezzo,
                    autore: 'Tu',
                    autoreRole: currentUser,
                    data: 'ora'
                };
                annunci.unshift(nuovoAnnuncio);
                showToast('‚úÖ Annuncio pubblicato con successo!', 'success');
            }
            
            renderAnnunci();
            toggleAnnuncioForm();
        };

        window.toggleAnnuncioForm = function(annuncioId = null) {
            const form = document.getElementById('annuncioForm');
            
            if (annuncioId) {
                editingAnnuncioId = annuncioId;
                const annuncio = annunci.find(a => a.id === annuncioId);
                if (annuncio) {
                    document.getElementById('annuncioTitolo').value = annuncio.titolo;
                    document.getElementById('annuncioDescrizione').value = annuncio.descrizione;
                    const prezzoValue = annuncio.prezzo ? annuncio.prezzo.replace('üí∞ ', '').replace('‚Ç¨', '').trim() : '';
                    document.getElementById('annuncioPrezzo').value = prezzoValue;
                    
                    const options = document.getElementById('annuncioCategoria').options;
                    for (let i = 0; i < options.length; i++) {
                        if (options[i].value === annuncio.categoria) {
                            document.getElementById('annuncioCategoria').selectedIndex = i;
                            break;
                        }
                    }
                    form.classList.add('active');
                }
            } else {
                form.classList.toggle('active');
                if (!form.classList.contains('active')) {
                    editingAnnuncioId = null;
                    document.getElementById('annuncioTitolo').value = '';
                    document.getElementById('annuncioDescrizione').value = '';
                    document.getElementById('annuncioPrezzo').value = '';
                    document.getElementById('annuncioCategoria').selectedIndex = 0;
                }
            }
        };

        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideUp 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 2500);
        }

        function renderAnnunci() {
            const container = document.getElementById('listaAnnunci');
            if (!container) return;
            
            container.innerHTML = annunci.map(annuncio => {
                let canEdit = false;
                
                if (currentUser === 'admin') {
                    canEdit = true;
                }
                else if (currentUser === 'member' && annuncio.autore === 'Tu') {
                    canEdit = true;
                }
                
                const categorieNomi = {
                    'üîß': 'Vendita',
                    'üë®‚Äçüíª': 'Lavoro',
                    'üè¢': 'Immobili',
                    'ü§ù': 'Partnership',
                    'üìö': 'Formazione',
                    'üéØ': 'Servizi'
                };
                
                return `
                    <div class="evento-card annuncio-card">
                        ${canEdit ? 
                            `<div class="annuncio-controls">
                                <button type="button" class="annuncio-edit-btn" onclick="window.modificaAnnuncio(${annuncio.id})" title="Modifica annuncio">‚úèÔ∏è</button>
                                <button type="button" class="annuncio-delete-btn" onclick="window.eliminaAnnuncio(${annuncio.id})" title="Elimina annuncio">üóëÔ∏è</button>
                            </div>` : 
                            ''}
                        
                        <div class="annuncio-header">
                            <span class="annuncio-categoria-badge">
                                ${annuncio.categoria} ${categorieNomi[annuncio.categoria] || 'Altro'}
                            </span>
                        </div>
                        
                        <div class="annuncio-content">
                            <div class="evento-title">${annuncio.titolo}</div>
                            
                            <div class="evento-info" style="margin-top: 10px;">
                                ${annuncio.descrizione}
                            </div>
                            
                            ${annuncio.prezzo ? 
                                `<div class="annuncio-price-badge" style="margin-top: 12px; display: inline-block;">
                                    üí∞ ${annuncio.prezzo}
                                </div>` : ''
                            }
                            
                            <div class="annuncio-meta">
                                <span class="annuncio-author">
                                    üë§ ${annuncio.autore}
                                </span>
                                <span class="annuncio-time">
                                    ${annuncio.data}
                                </span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        function selectRole(role, element) {
            currentRole = role;
            document.querySelectorAll('.role-btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
            document.getElementById('loginEmail').value = credentials[role].email;
            document.getElementById('loginPassword').value = credentials[role].password;
        }

        function doLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const cred = credentials[currentRole];
            
            if (email === cred.email && password === cred.password) {
                currentUser = currentRole;
                
                const allBadges = document.querySelectorAll('.user-badge');
                allBadges.forEach(badge => {
                    badge.textContent = cred.label;
                });
                
                document.getElementById('bottomNav').style.display = 'grid';
                goToPage('dashboard');
                showToast('‚úÖ Accesso effettuato come ' + cred.label, 'success');
                
                if (currentUser === 'member') {
                    const mieConsulenze = consulenze.filter(c => c.membro === 'Tu');
                    if (mieConsulenze.length > 0) {
                        setTimeout(() => {
                            showToast('üí° Hai ' + mieConsulenze.length + ' consulenza prenotata. Vai in Consulenti per gestirla!', 'success');
                        }, 2000);
                    }
                }
                
                renderEventi();
                updateCounters();
                renderAnnunci();
            } else {
                showToast('‚ùå Credenziali errate', 'error');
            }
        }

        function logout() {
            if (confirm('Vuoi davvero uscire?')) {
                currentUser = null;
                currentRole = 'admin';
                document.getElementById('bottomNav').style.display = 'none';
                document.getElementById('loginEmail').value = credentials['admin'].email;
                document.getElementById('loginPassword').value = credentials['admin'].password;
                document.querySelectorAll('.role-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.role-btn')[0].classList.add('active');
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.getElementById('loginPage').classList.add('active');
                showToast('üëã Arrivederci!', 'success');
            }
        }
        function goToPage(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
            
            const pageMap = {
                'login': 'loginPage',
                'dashboard': 'dashboardPage',
                'bacheca': 'bachecaPage',
                'eventi': 'eventiPage',
                'membri': 'membriPage',
                'video': 'videoPage',
                'convenzioni': 'convenzioniPage',
                'consulenti': 'consulentiPage'
            };
            
            const navIndex = {
                'dashboard': 0,
                'bacheca': 1,
                'eventi': 2,
                'membri': 3,
                'video': 4,
                'convenzioni': 5,
                'consulenti': 6
            };
            
            const pageId = pageMap[page];
            if (pageId) {
                document.getElementById(pageId).classList.add('active');
            }
            
            if (navIndex[page] !== undefined) {
                document.querySelectorAll('.nav-item')[navIndex[page]].classList.add('active');
            }
            
            if (page === 'eventi') {
                renderEventi();
            }
            
            if (page === 'bacheca') {
                renderAnnunci();
                const addBtn = document.getElementById('addAnnuncioBtn');
                if (addBtn) {
                    addBtn.style.display = (currentUser === 'member' || currentUser === 'admin') ? 'flex' : 'none';
                }
            }
            
            if (page === 'consulenti') {
                initConsulentiPage();
            }
        }

        function renderEventi() {
            const container = document.getElementById('listaEventi');
            if (!container) return;
            
            const eventi = [
                { id: 1, day: 28, month: 'GEN', title: 'ü§ù Networking Imprenditori Roma', location: 'üìç Hotel Hilton EUR', time: '‚è∞ 18:30-21:00', participants: partecipantiBase[1] || 45 },
                { id: 2, day: 5, month: 'FEB', title: 'üíª Workshop Digital Marketing', location: 'üìç Sede Consorzio', time: '‚è∞ 09:00-13:00', participants: partecipantiBase[2] || 31 },
                { id: 3, day: 15, month: 'FEB', title: 'üéØ Pitch Day Startup', location: 'üìç Innovation Hub', time: '‚è∞ 14:00-18:00', participants: 28 }
            ];
            
            container.innerHTML = eventi.map(e => {
                const confirmed = eventiPartecipazioni[e.id];
                return `
                    <div class="evento-card ${confirmed ? 'confirmed' : ''}">
                        <div class="evento-date">
                            <div class="date-box ${confirmed ? 'confirmed' : ''}">
                                <div class="date-day">${e.day}</div>
                                <div class="date-month">${e.month}</div>
                            </div>
                            <div>
                                <div class="evento-title">${e.title}</div>
                                ${confirmed ? '<span style="color: #ddfc1b; font-size: 13px;">‚úÖ Partecipazione Confermata</span>' : ''}
                            </div>
                        </div>
                        <div class="evento-info">
                            ${e.location}<br>
                            ${e.time}
                        </div>
                        <div class="evento-participants">
                            üë• <span id="part-${e.id}">${e.participants + (confirmed ? 1 : 0)}</span> partecipanti
                        </div>
                        ${confirmed ? 
                            `<button type="button" class="btn-action btn-cancel" onclick="cancellaEvento(${e.id})">Cancella Partecipazione</button>` :
                            `<button type="button" class="btn-action btn-confirm" onclick="confermaEvento(${e.id})">Conferma Partecipazione</button>`
                        }
                    </div>
                `;
            }).join('');
        }

        function confermaEvento(id) {
            if (currentUser !== 'member' && currentUser !== 'admin') {
                showToast('‚ö†Ô∏è Solo i membri e admin possono partecipare', 'error');
                return;
            }
            
            eventiPartecipazioni[id] = true;
            const partEl = document.getElementById(`part-${id}`);
            if (partEl) {
                partEl.textContent = parseInt(partEl.textContent) + 1;
            }
            renderEventi();
            updateCounters();
            showToast('‚úÖ Partecipazione confermata!', 'success');
        }

        function cancellaEvento(id) {
            delete eventiPartecipazioni[id];
            const partEl = document.getElementById(`part-${id}`);
            if (partEl) {
                partEl.textContent = parseInt(partEl.textContent) - 1;
            }
            renderEventi();
            updateCounters();
            showToast('‚ùå Partecipazione cancellata', 'error');
        }

        function updateCounters() {
            const count = Object.keys(eventiPartecipazioni).length;
            const confEl = document.getElementById('eventiConfermati');
            const notEl = document.getElementById('notificheAttive');
            const statEl = document.getElementById('statEventi');
            
            if (confEl) confEl.textContent = count;
            if (notEl) notEl.textContent = count;
            if (statEl) statEl.textContent = count;
        }

        // FUNZIONI CONSULENTI
        // NUOVE FUNZIONI CONSULENTE - AGGIUNGI QUESTE
function openSuggestMember() {
    document.getElementById('suggestMemberModal').classList.add('active');
}

function closeSuggestMember() {
    document.getElementById('suggestMemberModal').classList.remove('active');
    // Pulisci i campi
    document.getElementById('suggestNome').value = '';
    document.getElementById('suggestReferente').value = '';
    document.getElementById('suggestEmail').value = '';
    document.getElementById('suggestTelefono').value = '';
    document.getElementById('suggestSettore').value = '';
    document.getElementById('suggestNote').value = '';
}

function inviaSuggerimento() {
    const nome = document.getElementById('suggestNome').value.trim();
    const email = document.getElementById('suggestEmail').value.trim();
    
    if (!nome || !email) {
        showToast('‚ö†Ô∏è Compila almeno nome azienda ed email', 'error');
        return;
    }
    
    showToast('‚úÖ Suggerimento inviato al Consorzio!', 'success');
    setTimeout(() => {
        showToast('üí∞ Se si iscrive, riceverai -‚Ç¨200 sulla quota!', 'success');
    }, 1000);
    
    closeSuggestMember();
}

function inviaFeedback() {
    const miglioramenti = document.getElementById('feedbackMiglioramenti').value.trim();
    
    if (!miglioramenti) {
        showToast('‚ö†Ô∏è Devi suggerire almeno un miglioramento', 'error');
        return;
    }
    
    showToast('‚úÖ Feedback inviato! Grazie per il tuo contributo', 'success');
    document.getElementById('feedbackMiglioramenti').value = '';
}

function proponiArgomento() {
    const titolo = document.getElementById('topicTitle').value.trim();
    const descrizione = document.getElementById('topicDescription').value.trim();
    
    if (!titolo || !descrizione) {
        showToast('‚ö†Ô∏è Compila tutti i campi', 'error');
        return;
    }
    
    showToast('üí° Argomento proposto! Verr√† valutato per le prossime riunioni', 'success');
    document.getElementById('topicTitle').value = '';
    document.getElementById('topicDescription').value = '';
}

// Aggiungi queste funzioni all'oggetto window
window.openSuggestMember = openSuggestMember;
window.closeSuggestMember = closeSuggestMember;
window.inviaSuggerimento = inviaSuggerimento;
window.inviaFeedback = inviaFeedback;
window.proponiArgomento = proponiArgomento;
        function initConsulentiPage() {
            const mieConsulenze = document.getElementById('mieConsulenze');
            const listaConsulenti = document.getElementById('listaConsulenti');
            const dashboardConsulente = document.getElementById('dashboardConsulente');
    // Nascondi tutto di default
    if (dashboardConsulente) dashboardConsulente.style.display = 'none';
            
            if (currentUser === 'member') {
                mieConsulenze.style.display = 'block';
                listaConsulenti.style.display = 'block';
                renderConsulenze('member');
                
                setTimeout(() => {
                    if (consulenze.filter(c => c.membro === 'Tu').length > 0) {
                        showToast('üí° Hai una consulenza prenotata! Puoi modificare data/ora con il pulsante "Sposta Data/Ora"', 'success');
                    }
                }, 500);
           } else if (currentUser === 'consulente') {
    // Mostra dashboard consulente
    document.getElementById('dashboardConsulente').style.display = 'block';
    document.getElementById('mieConsulenze').style.display = 'none';
    document.getElementById('listaConsulenti').style.display = 'none';
    
    // Mostra le consulenze del consulente
    const containerConsulenze = document.getElementById('consulenzeConsulente');
    const mieConsulenze = consulenze.filter(c => c.consulente === 'Maria Bianchi');
    
    if (mieConsulenze.length > 0) {
        containerConsulenze.innerHTML = mieConsulenze.map(c => `
            <div class="consulenza-card ${c.status}">
                <span class="consulenza-status ${c.status}">
                    ${c.status === 'pending' ? '‚è≥ Da Confermare' : '‚úÖ Confermata'}
                </span>
                <div class="consulenza-details">
                    <div class="consulenza-value">üë§ ${c.membro}</div>
                    <div class="consulenza-value">üìÖ ${c.data} - ‚è∞ ${c.ora}</div>
                    <div class="consulenza-value">${c.argomento}</div>
                </div>
                ${c.status === 'pending' ? `
                    <div class="consulenza-actions">
                        <button class="btn-conferma" onclick="confermaConsulenza(${c.id})">‚úÖ Conferma</button>
                        <button class="btn-cancella" onclick="cancellaConsulenza(${c.id})">‚ùå Rifiuta</button>
                    </div>
                ` : ''}
            </div>
        `).join('');
    } else {
        containerConsulenze.innerHTML = '<p style="color: #aaa;">Nessuna consulenza programmata</p>'; }
    

            } else if (currentUser === 'admin') {
                mieConsulenze.style.display = 'block';
                listaConsulenti.style.display = 'block';
                renderConsulenze('admin');
            }
        }

        function renderConsulenze(role) {
            const container = document.getElementById('listaConsulenze');
            if (!container) return;
            
            let filteredConsulenze = [];
            
            if (role === 'member') {
                filteredConsulenze = consulenze.filter(c => c.membro === 'Tu');
            } else if (role === 'consulente') {
                filteredConsulenze = consulenze.filter(c => c.consulente === 'Maria Bianchi');
            } else if (role === 'admin') {
                filteredConsulenze = consulenze;
            }
            
            if (filteredConsulenze.length === 0) {
                container.innerHTML = '<p style="color: #aaa; text-align: center; padding: 20px;">Nessuna consulenza programmata</p>';
                return;
            }
            
            let headerNote = '';
            if (role === 'member' && filteredConsulenze.length > 0) {
                headerNote = `
                    <div style="background: rgba(221, 252, 27, 0.1); padding: 12px; border-radius: 10px; margin-bottom: 15px; border: 1px solid rgba(221, 252, 27, 0.2);">
                        <p style="color: var(--lime); font-size: 14px; margin: 0;">
                            üí° <strong>Suggerimento:</strong> Usa il pulsante giallo "üîÑ SPOSTA DATA/ORA" per modificare l'appuntamento (fino a 24h prima)
                        </p>
                    </div>
                `;
            }
            
            container.innerHTML = headerNote + filteredConsulenze.map(consulenza => {
                const canEdit = canEditConsulenza(consulenza);
                const isFirstFree = !primaConsulenzaUsata[consulenza.membro];
                
                return `
                    <div class="consulenza-card ${consulenza.status}">
                        <span class="consulenza-status ${consulenza.status}">
                            ${consulenza.status === 'pending' ? '‚è≥ In Attesa' : '‚úÖ Confermata'}
                        </span>
                        
                        <div class="consulenza-details">
                            <div class="consulenza-label">Consulente</div>
                            <div class="consulenza-value">${consulenza.consulente}</div>
                            
                            ${role !== 'member' ? `
                                <div class="consulenza-label">Membro</div>
                                <div class="consulenza-value">${consulenza.membro}</div>
                            ` : ''}
                            
                            <div class="consulenza-label">Data e Ora</div>
                            <div class="consulenza-value">üìÖ ${consulenza.data} - ‚è∞ ${consulenza.ora}</div>
                            
                            <div class="consulenza-label">Argomento</div>
                            <div class="consulenza-value">${consulenza.argomento}</div>
                            
                            ${isFirstFree && role === 'member' ? 
                                '<div class="consulenza-free-badge">‚ú® Prima Consulenza GRATUITA</div>' : 
                                ''
                            }
                            
                            ${canEdit && role === 'member' ? 
                                '<div class="time-warning" style="background: rgba(221, 252, 27, 0.15); border-color: rgba(221, 252, 27, 0.3); color: var(--lime);">‚úÖ Puoi ancora spostare data/ora (mancano pi√π di 24h)</div>' : 
                                !canEdit && role === 'member' ?
                                '<div class="time-warning">‚ö†Ô∏è Non pi√π modificabile (mancano meno di 24h)</div>' :
                                ''
                            }
                            
                            ${consulenza.status === 'pending' && role === 'member' ? 
                                '<div class="whatsapp-sent">üì± Notifica WhatsApp inviata al consulente</div>' : 
                                ''
                            }
                        </div>
                        
                        ${consulenza.status === 'modifica_proposta' && consulenza.propostaDa === 'consulente' && role === 'member' ? `
                            <div style="background: rgba(221,252,27,0.1); padding: 10px; border-radius: 10px; margin: 10px 0;">
                                <p style="color: var(--lime); margin: 0;">üìÖ Il consulente propone:</p>
                                <p style="color: white; margin: 5px 0;">üìÖ ${consulenza.propostaData} - ‚è∞ ${consulenza.propostaOra}</p>
                            </div>
                        ` : ''}
                        
                        <div class="consulenza-actions">
                            ${consulenza.status === 'modifica_proposta' && consulenza.propostaDa === 'consulente' && role === 'member' ? 
                                `<button type="button" class="btn-conferma" onclick="accettaProposta(${consulenza.id})">
                                    ‚úÖ Accetta Nuova Data
                                </button>
                                <button type="button" class="btn-cancella" onclick="rifiutaProposta(${consulenza.id})">
                                    ‚ùå Mantieni Data Originale
                                </button>` :
                                canEdit && role === 'member' ? 
                                `<button type="button" class="btn-modifica" onclick="modificaConsulenza(${consulenza.id})" title="Clicca per spostare l'appuntamento">
                                    üîÑ SPOSTA DATA/ORA
                                </button>` : 
                                ''
                            }
                            
                            ${consulenza.status === 'pending' && role === 'consulente' ? 
                                `<button type="button" class="btn-conferma" onclick="confermaConsulenza(${consulenza.id})">
                                    ‚úÖ Conferma
                                </button>` : 
                                ''
                            }
                            
                            ${canEdit || (consulenza.status === 'pending' && role === 'consulente') ? 
                                `<button type="button" class="btn-cancella" onclick="cancellaConsulenza(${consulenza.id})">
                                    ‚ùå Cancella
                                </button>` : 
                                ''
                            }
                        </div>
                    </div>
                `;
            }).join('');
        }

        function canEditConsulenza(consulenza) {
            const now = new Date();
            const appointmentDate = new Date(consulenza.data + ' ' + consulenza.ora);
            const hoursUntil = (appointmentDate - now) / (1000 * 60 * 60);
            return hoursUntil > 24;
        }

        function openBookingModal(consulente, specializzazione) {
            if (currentUser !== 'member' && currentUser !== 'admin') {
                showToast('‚ö†Ô∏è Solo i membri possono prenotare consulenze', 'error');
                return;
            }
            
            document.getElementById('bookingConsulente').value = consulente;
            document.getElementById('bookingSpec').value = specializzazione;
            
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('bookingDate').valueAsDate = tomorrow;
            
            document.getElementById('bookingModal').classList.add('active');
        }

        function closeBookingModal() {
            document.getElementById('bookingModal').classList.remove('active');
            document.getElementById('bookingTopic').value = '';
            const modalTitle = document.querySelector('.booking-title');
            if (modalTitle) {
                modalTitle.textContent = 'üìÖ Prenota Consulenza';
            }
        }

   function confermaPrenotazione() {
    const consulente = document.getElementById('bookingConsulente').value;
    const data = document.getElementById('bookingDate').value;
    const ora = document.getElementById('bookingTime').value;
    const argomento = document.getElementById('bookingTopic').value.trim();
    
    if (!argomento) {
        showToast('‚ö†Ô∏è Inserisci l\'argomento della consulenza', 'error');
        return;
    }
    
    const modalTitle = document.querySelector('.booking-title');
    const isModifica = modalTitle && modalTitle.textContent.includes('Sposta');
    const isProposta = modalTitle && modalTitle.textContent.includes('Proponi');
    
    if (window.modificandoConsulenzaId) {
        // √à una proposta di modifica dal consulente
        const consulenzaOriginale = consulenze.find(c => c.id === window.modificandoConsulenzaId);
        if (consulenzaOriginale) {
            consulenzaOriginale.propostaData = data;
            consulenzaOriginale.propostaOra = ora;
            consulenzaOriginale.propostaDa = 'consulente';
            consulenzaOriginale.status = 'modifica_proposta';
            showToast('üìÖ Proposta di modifica inviata al membro!', 'success');
            setTimeout(() => {
                showToast('üì± Il membro ricever√† una notifica per confermare', 'success');
            }, 500);
        }
        window.modificandoConsulenzaId = null;
    } else if (window.editingConsulenzaId) {
        // Modifica diretta dal membro
        const nuovaConsulenza = {
            id: nextConsulenzaId++,
            consulente: consulente,
            membro: currentUser === 'admin' ? 'Admin' : 'Tu',
            data: data,
            ora: ora,
            argomento: argomento,
            status: 'pending',
            propostaData: null,
            propostaOra: null,
            propostaDa: null
        };
        
        consulenze.push(nuovaConsulenza);
        window.editingConsulenzaId = null;
        
        showToast('‚úÖ Appuntamento spostato con successo!', 'success');
        setTimeout(() => {
            showToast('üì± Notifica di modifica inviata al consulente', 'success');
        }, 500);
    } else {
        // √à una nuova prenotazione
        const nuovaConsulenza = {
            id: nextConsulenzaId++,
            consulente: consulente,
            membro: currentUser === 'admin' ? 'Admin' : 'Tu',
            data: data,
            ora: ora,
            argomento: argomento,
            status: 'pending',
            propostaData: null,
            propostaOra: null,
            propostaDa: null
        };
        
        consulenze.push(nuovaConsulenza);
        
        showToast('üì± Notifica WhatsApp inviata al consulente!', 'success');
        setTimeout(() => {
            showToast('‚úÖ Richiesta inviata! Puoi modificare data/ora fino a 24h prima', 'success');
        }, 1000);
    }
    
    closeBookingModal();
    
    if (document.getElementById('consulentiPage').classList.contains('active')) {
        if (currentUser === 'consulente') {
            initConsulentiPage();
        } else {
            renderConsulenze(currentUser);
            const mieConsulenze = document.getElementById('mieConsulenze');
            if (mieConsulenze) {
                mieConsulenze.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
    }
}
        // √à una proposta di modifica dal consulente
        const consulenzaOriginale = consulenze.find(c => c.id === window.modificandoConsulenzaId);
        if (consulenzaOriginale) {
            consulenzaOriginale.propostaData = data;
            consulenzaOriginale.propostaOra = ora;
            consulenzaOriginale.propostaDa = 'consulente';
            consulenzaOriginale.status = 'modifica_proposta';
            showToast('üìÖ Proposta di modifica inviata al membro!', 'success');
            setTimeout(() => {
                showToast('üì± Il membro ricever√† una notifica per confermare', 'success');
            }, 500);
        }
        window.modificandoConsulenzaId = null;
    } else if (isModifica) {
        showToast('‚úÖ Appuntamento spostato con successo!', 'success');
        setTimeout(() => {
            showToast('üì± Notifica di modifica inviata al consulente', 'success');
        }, 500);
    } else {
            showToast('‚úÖ Appuntamento spostato con successo!', 'success');
            setTimeout(() => {
                showToast('üì± Notifica di modifica inviata al consulente', 'success');
            }, 500);
        }
    } else {
        // √à una nuova prenotazione
        const nuovaConsulenza = {
            id: nextConsulenzaId++,
            consulente: consulente,
            membro: currentUser === 'admin' ? 'Admin' : 'Tu',
            data: data,
            ora: ora,
            argomento: argomento,
            status: 'pending',
            propostaDa: null,
            dataOriginale: null,
            oraOriginale: null
        };
        
        consulenze.push(nuovaConsulenza);
        
        showToast('üì± Notifica WhatsApp inviata al consulente!', 'success');
        setTimeout(() => {
            showToast('‚úÖ Richiesta inviata! Puoi modificare data/ora fino a 24h prima', 'success');
        }, 1000);
    }
    
    window.editingConsulenzaId = null;
    closeBookingModal();
    
    if (document.getElementById('consulentiPage').classList.contains('active')) {
        refreshConsulenzaView();
    }
}
            
            const nuovaConsulenza = {
                id: nextConsulenzaId++,
                consulente: consulente,
                membro: currentUser === 'admin' ? 'Admin' : 'Tu',
                data: data,
                ora: ora,
                argomento: argomento,
                status: 'pending'
            };
            
            consulenze.push(nuovaConsulenza);
            
            const modalTitle = document.querySelector('.booking-title');
            const isModifica = modalTitle && modalTitle.textContent.includes('Sposta');
            
            if (isModifica) {
                showToast('‚úÖ Appuntamento spostato con successo!', 'success');
                setTimeout(() => {
                    showToast('üì± Notifica di modifica inviata al consulente', 'success');
                }, 500);
            } else {
                showToast('üì± Notifica WhatsApp inviata al consulente!', 'success');
                setTimeout(() => {
                    showToast('‚úÖ Richiesta inviata! Puoi modificare data/ora fino a 24h prima', 'success');
                }, 1000);
            }
            
            closeBookingModal();
            
            if (document.getElementById('consulentiPage').classList.contains('active')) {
                renderConsulenze(currentUser);
                const mieConsulenze = document.getElementById('mieConsulenze');
                if (mieConsulenze) {
                    mieConsulenze.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        }

       function confermaConsulenza(id) {
    const consulenza = consulenze.find(c => c.id === id);
    if (consulenza) {
        consulenza.status = 'confirmed';
        showToast('‚úÖ Consulenza confermata!', 'success');
        setTimeout(() => {
            showToast('üì± Notifica di conferma inviata al membro', 'success');
        }, 500);
        
        // Aggiorna la vista corretta in base al ruolo
        if (currentUser === 'consulente') {
            // Aggiorna il dashboard del consulente
            const containerConsulenze = document.getElementById('consulenzeConsulente');
            const mieConsulenze = consulenze.filter(c => c.consulente === 'Maria Bianchi');
            
            if (mieConsulenze.length > 0) {
                containerConsulenze.innerHTML = mieConsulenze.map(c => `
                    <div class="consulenza-card ${c.status}">
                        <span class="consulenza-status ${c.status}">
                            ${c.status === 'pending' ? '‚è≥ Da Confermare' : '‚úÖ Confermata'}
                        </span>
                        <div class="consulenza-details">
                            <div class="consulenza-value">üë§ ${c.membro}</div>
                            <div class="consulenza-value">üìÖ ${c.data} - ‚è∞ ${c.ora}</div>
                            <div class="consulenza-value">${c.argomento}</div>
                        </div>
                       ${c.status === 'pending' ? `
                            <div class="consulenza-actions">
                                <button class="btn-conferma" onclick="confermaConsulenza(${c.id})">‚úÖ Conferma</button>
                                <button class="btn-cancella" onclick="cancellaConsulenza(${c.id})">‚ùå Rifiuta</button>
                            </div>
                        ` : c.status === 'modifica_proposta' && c.propostaDa === 'consulente' ? `
                            <div style="background: rgba(255,193,7,0.1); padding: 10px; border-radius: 10px; margin-top: 10px;">
                                <p style="color: var(--warning); margin: 0;">‚è≥ In attesa di conferma dal membro per:</p>
                                <p style="color: white; margin: 5px 0;">üìÖ ${c.propostaData} - ‚è∞ ${c.propostaOra}</p>
                            </div>
                        ` : c.status === 'modifica_proposta' && c.propostaDa === 'membro' ? `
                            <div style="background: rgba(221,252,27,0.1); padding: 10px; border-radius: 10px; margin-top: 10px;">
                                <p style="color: var(--lime); margin: 0;">üìÖ Il membro propone:</p>
                                <p style="color: white; margin: 5px 0;">üìÖ ${c.propostaData} - ‚è∞ ${c.propostaOra}</p>
                            </div>
                            <div class="consulenza-actions">
                                <button class="btn-conferma" onclick="accettaProposta(${c.id})">‚úÖ Accetta Proposta</button>
                                <button class="btn-cancella" onclick="rifiutaProposta(${c.id})">‚ùå Rifiuta</button>
                            </div>
                        ` : c.status === 'confirmed' ? `
                            <div class="consulenza-actions">
                                <button class="btn-modifica" onclick="modificaConsulenzaConsulente(${c.id})">üîÑ Modifica Data/Ora</button>
                                <button class="btn-cancella" onclick="cancellaConsulenza(${c.id})">‚ùå Cancella</button>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }
        } else {
            renderConsulenze(currentUser);
        }
    }
}

  function modificaConsulenza(id) {
    const consulenza = consulenze.find(c => c.id === id);
    if (!consulenza) return;
    
    if (!canEditConsulenza(consulenza)) {
        showToast('‚ö†Ô∏è Non puoi modificare a meno di 24 ore dall\'appuntamento', 'error');
        return;
    }
    
    document.getElementById('bookingConsulente').value = consulenza.consulente;
    document.getElementById('bookingSpec').value = 'üìÖ Modifica Data/Ora Appuntamento';
    document.getElementById('bookingDate').value = consulenza.data;
    document.getElementById('bookingTime').value = consulenza.ora;
    document.getElementById('bookingTopic').value = consulenza.argomento;
    
    const modalTitle = document.querySelector('.booking-title');
    if (modalTitle) {
        modalTitle.textContent = 'üìÖ Sposta Appuntamento';
    }
    
 document.getElementById('bookingModal').classList.add('active');
    window.editingConsulenzaId = id;
    consulenze = consulenze.filter(c => c.id !== id);
}

// NUOVA FUNZIONE SEPARATA (NON PI√ô DENTRO L'ALTRA)
function modificaConsulenzaConsulente(id) {
    const consulenza = consulenze.find(c => c.id === id);
    if (!consulenza) return;
    
    // Salva l'ID temporaneamente per la modifica
    window.modificandoConsulenzaId = id;
    
    document.getElementById('bookingConsulente').value = consulenza.consulente;
    document.getElementById('bookingSpec').value = 'üìÖ Proponi Nuova Data/Ora';
    document.getElementById('bookingDate').value = consulenza.data;
    document.getElementById('bookingTime').value = consulenza.ora;
    document.getElementById('bookingTopic').value = consulenza.argomento;
    
    const modalTitle = document.querySelector('.booking-title');
    if (modalTitle) {
        modalTitle.textContent = 'üìÖ Proponi Nuova Data/Ora';
    }
    
    document.getElementById('bookingModal').classList.add('active');
}

       function cancellaConsulenza(id) {
    const consulenza = consulenze.find(c => c.id === id);
    if (!consulenza) return;
    
    if (currentUser !== 'consulente' && !canEditConsulenza(consulenza)) {
        showToast('‚ö†Ô∏è Non puoi cancellare a meno di 24 ore dall\'appuntamento', 'error');
        return;
    }
    
    if (confirm('Sei sicuro di voler cancellare questa consulenza?')) {
        consulenze = consulenze.filter(c => c.id !== id);
        showToast('‚ùå Consulenza cancellata', 'success');
        setTimeout(() => {
            const recipient = currentUser === 'consulente' ? 'membro' : 'consulente';
            showToast(`üì± Notifica di cancellazione inviata al ${recipient}`, 'warning');
        }, 500);
        
        // Aggiorna la vista corretta
        if (currentUser === 'consulente') {
            const containerConsulenze = document.getElementById('consulenzeConsulente');
            const mieConsulenze = consulenze.filter(c => c.consulente === 'Maria Bianchi');
            
            if (mieConsulenze.length > 0) {
                containerConsulenze.innerHTML = mieConsulenze.map(c => `
                    <div class="consulenza-card ${c.status}">
                        <span class="consulenza-status ${c.status}">
                            ${c.status === 'pending' ? '‚è≥ Da Confermare' : '‚úÖ Confermata'}
                        </span>
                        <div class="consulenza-details">
                            <div class="consulenza-value">üë§ ${c.membro}</div>
                            <div class="consulenza-value">üìÖ ${c.data} - ‚è∞ ${c.ora}</div>
                            <div class="consulenza-value">${c.argomento}</div>
                        </div>
                        ${c.status === 'pending' ? `
                            <div class="consulenza-actions">
                                <button class="btn-conferma" onclick="confermaConsulenza(${c.id})">‚úÖ Conferma</button>
                                <button class="btn-cancella" onclick="cancellaConsulenza(${c.id})">‚ùå Rifiuta</button>
                            </div>
                        ` : c.status === 'confirmed' ? `
                            <div class="consulenza-actions">
                                <button class="btn-modifica" onclick="modificaConsulenzaConsulente(${c.id})">üîÑ Modifica Data/Ora</button>
                                <button class="btn-cancella" onclick="cancellaConsulenza(${c.id})">‚ùå Cancella</button>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            } else {
                containerConsulenze.innerHTML = '<p style="color: #aaa;">Nessuna consulenza programmata</p>';
            }
        } else {
            renderConsulenze(currentUser);
        }
    }
}
function accettaProposta(id) {
    const consulenza = consulenze.find(c => c.id === id);
    if (!consulenza) return;
    
    // Accetta la proposta sostituendo data e ora
    consulenza.data = consulenza.propostaData;
    consulenza.ora = consulenza.propostaOra;
    consulenza.propostaData = null;
    consulenza.propostaOra = null;
    consulenza.propostaDa = null;
    consulenza.status = 'confirmed';
    
    showToast('‚úÖ Nuova data/ora accettata!', 'success');
    setTimeout(() => {
        const notificaA = currentUser === 'member' ? 'consulente' : 'membro';
        showToast(`üì± Notifica di conferma inviata al ${notificaA}`, 'success');
    }, 500);
    
    if (currentUser === 'consulente') {
        initConsulentiPage();
    } else {
        renderConsulenze(currentUser);
    }
}

function rifiutaProposta(id) {
    const consulenza = consulenze.find(c => c.id === id);
    if (!consulenza) return;
    
    // Rifiuta la proposta mantenendo data/ora originali
    consulenza.propostaData = null;
    consulenza.propostaOra = null;
    consulenza.propostaDa = null;
    consulenza.status = 'confirmed';
    
    showToast('‚ùå Proposta rifiutata, mantenuta data originale', 'warning');
    
    if (currentUser === 'consulente') {
        initConsulentiPage();
    } else {
        renderConsulenze(currentUser);
    }
}

// Aggiungi al window
window.accettaProposta = accettaProposta;
window.rifiutaProposta = rifiutaProposta;
        // Esponi tutte le funzioni su window
        window.selectRole = selectRole;
        window.doLogin = doLogin;
        window.logout = logout;
        window.goToPage = goToPage;
        window.confermaEvento = confermaEvento;
        window.cancellaEvento = cancellaEvento;
        window.openBookingModal = openBookingModal;
        window.closeBookingModal = closeBookingModal;
        window.confermaPrenotazione = confermaPrenotazione;
        window.confermaConsulenza = confermaConsulenza;
        window.modificaConsulenza = modificaConsulenza;
        window.cancellaConsulenza = cancellaConsulenza;
        window.modificaConsulenzaConsulente = modificaConsulenzaConsulente;
        window.accettaProposta = accettaProposta;
window.rifiutaProposta = rifiutaProposta;
        
        console.log('‚úÖ App Consorzio caricata correttamente!');
    </script>
</body>
</html>
 














