<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consorzio Imprenditori</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .app-container {
            width: 95%;
            max-width: 1200px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 15px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2c3e50;
            font-size: 40px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .user-info {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 12px;
        }

        .nav-input {
            display: none;
        }

        .page {
            display: none;
        }

        #login:checked ~ .pages #loginPage,
        #admin-dashboard:checked ~ .pages #adminDashboardPage,
        #member-dashboard:checked ~ .pages #memberDashboardPage,
        #admin-agenda:checked ~ .pages #adminAgendaPage,
        #admin-membri:checked ~ .pages #adminMembriPage,
        #admin-nuovo-evento:checked ~ .pages #adminNuovoEventoPage,
        #member-agenda:checked ~ .pages #memberAgendaPage,
        #albo:checked ~ .pages #alboPage,
        #bacheca:checked ~ .pages #bachecaPage,
        #video:checked ~ .pages #videoPage,
        #convenzioni:checked ~ .pages #convenzioniPage,
        #consulenti:checked ~ .pages #consulentiPage,
        #progetti:checked ~ .pages #progettiPage,
        #nuova-convenzione:checked ~ .pages #nuovaConvenzioneForm {
            display: block;
        }

        .nav-btn {
            background: linear-gradient(135deg, #555, #666);
            color: white;
            padding: 25px 15px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            text-decoration: none;
            display: block;
        }

        .nav-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }

        .nav-btn.admin {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .nav-btn.member {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .notification-dot {
            position: absolute;
            top: 10px;
            right: 10px;
            min-width: 18px;
            height: 18px;
            background: #e74c3c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 11px;
            font-weight: bold;
            border: 2px solid white;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .card-icon {
            font-size: 24px;
            margin-bottom: 10px;
            display: block;
        }

        .card-title {
            font-size: 14px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
        }

        .btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .action-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .action-btn.blue {
            background: linear-gradient(135deg, #3498db, #2980b9);
        }

        .action-btn.red {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .action-btn.orange {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .whatsapp-btn {
            background: #25d366;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            font-size: 12px;
        }

        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
        }

        .main-content {
            padding: 25px;
        }

        .page-content {
            padding: 25px;
        }

        .back-btn {
            background: #95a5a6;
            color: white;
            margin-bottom: 15px;
            padding: 6px 12px;
            border-radius: 15px;
            text-decoration: none;
            display: inline-block;
            font-size: 12px;
        }

        .notification-item {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .member-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border-left: 4px solid #3498db;
        }

        .member-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .event-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .event-date {
            background: #3498db;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 8px;
        }

        .stats-box {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }

        .admin-stats-box {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }

        .member-stats-box {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }

        .login-container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .login-tabs {
            display: flex;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
        }

        .login-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .login-tab.admin {
            background: #e74c3c;
            color: white;
        }

        .login-tab.member {
            background: #27ae60;
            color: white;
        }

        .login-tab.active {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .login-form {
            display: none;
        }

        .login-form.active {
            display: block;
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            display: inline-block;
        }

        .status-active {
            background: #27ae60;
            color: white;
        }

        .status-pending {
            background: #f39c12;
            color: white;
        }

        .status-suspended {
            background: #e74c3c;
            color: white;
        }

        .impersonate-btn {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            font-size: 11px;
            transition: all 0.3s;
        }

        .impersonate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.3);
        }
    </style>
    <script>
        // Sistema di autenticazione e ruoli
        let currentUser = null;
        let isImpersonating = false;
        let originalUser = null;

        // Utenti predefiniti
        const users = {
            admin: {
                email: 'admin@consorzio.it',
                password: 'admin123',
                role: 'admin',
                name: 'Amministratore Consorzio',
                company: 'Direzione Generale'
            },
            member1: {
                email: 'rossi@rossisrl.it',
                password: 'member123',
                role: 'member',
                name: 'Marco Rossi',
                company: 'Rossi SRL',
                status: 'active',
                joinDate: '2024-01-15'
            },
            member2: {
                email: 'bianchi@bianchiconsulting.it',
                password: 'member123',
                role: 'member',
                name: 'Laura Bianchi',
                company: 'Bianchi Consulting',
                status: 'active',
                joinDate: '2024-02-20'
            },
            member3: {
                email: 'verdi@verdemanifatture.it',
                password: 'member123',
                role: 'member',
                name: 'Giuseppe Verdi',
                company: 'Verde Manifatture',
                status: 'pending',
                joinDate: '2024-08-10'
            }
        };

        // Eventi del consorzio
        let events = [
            {
                id: 1,
                title: 'Assemblea Generale',
                date: '2025-09-25',
                time: '10:00',
                location: 'Sala conferenze',
                description: 'Discussione bilancio 2025 e strategie di crescita',
                participants: 12,
                createdBy: 'admin'
            },
            {
                id: 2,
                title: 'Workshop Innovazione Digitale',
                date: '2025-10-02',
                time: '15:00',
                location: 'Sede del Consorzio',
                description: 'Seminario su digitalizzazione aziendale e nuove tecnologie',
                participants: 8,
                createdBy: 'admin'
            },
            {
                id: 3,
                title: 'Networking Settore Tech',
                date: '2025-10-15',
                time: '18:00',
                location: 'Location da definire',
                description: 'Aperitivo networking per aziende tecnologiche del consorzio',
                participants: 27,
                createdBy: 'admin'
            }
        ];

        function switchLoginTab(tab) {
            document.querySelectorAll('.login-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.login-form').forEach(f => f.classList.remove('active'));
            
            document.querySelector(`.login-tab.${tab}`).classList.add('active');
            document.querySelector(`#${tab}Form`).classList.add('active');
        }

        function login(role) {
            const email = document.getElementById(`${role}Email`).value;
            const password = document.getElementById(`${role}Password`).value;
            
            // Trova l'utente
            const user = Object.values(users).find(u => u.email === email && u.password === password && u.role === role);
            
            if (user) {
                currentUser = user;
                if (role === 'admin') {
                    document.getElementById('admin-dashboard').checked = true;
                } else {
                    document.getElementById('member-dashboard').checked = true;
                }
                updateUserInfo();
                showNotification(`✅ Accesso effettuato come ${user.name}`, 'success');
            } else {
                showNotification('❌ Credenziali non valide', 'error');
            }
        }

        function updateUserInfo() {
            const userInfoElements = document.querySelectorAll('.user-info');
            userInfoElements.forEach(el => {
                if (isImpersonating && originalUser) {
                    el.innerHTML = `👤 ${currentUser.name} (👁️ Impersonificato da ${originalUser.name})`;
                } else {
                    el.innerHTML = `👤 ${currentUser.name} (${currentUser.role === 'admin' ? 'Admin' : 'Membro'})`;
                }
            });
        }

        function logout() {
            currentUser = null;
            isImpersonating = false;
            originalUser = null;
            document.getElementById('login').checked = true;
            showNotification('👋 Disconnesso con successo', 'success');
        }

        function impersonateMember(memberKey) {
            if (currentUser.role !== 'admin') return;
            
            originalUser = currentUser;
            currentUser = users[memberKey];
            isImpersonating = true;
            
            document.getElementById('member-dashboard').checked = true;
            updateUserInfo();
            showNotification(`👁️ Ora stai visualizzando come ${currentUser.name}`, 'success');
        }

        function stopImpersonating() {
            if (!isImpersonating) return;
            
            currentUser = originalUser;
            originalUser = null;
            isImpersonating = false;
            
            document.getElementById('admin-dashboard').checked = true;
            updateUserInfo();
            showNotification('🔄 Tornato alla vista amministratore', 'success');
        }

        function deleteMember(memberKey) {
            if (currentUser.role !== 'admin') return;
            
            if (confirm(`Sei sicuro di voler eliminare ${users[memberKey].name}?`)) {
                delete users[memberKey];
                showNotification('🗑️ Membro eliminato con successo', 'success');
                loadMembersPage();
            }
        }

        function createEvent() {
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const location = document.getElementById('eventLocation').value;
            const description = document.getElementById('eventDescription').value;
            
            if (!title || !date || !time || !location) {
                showNotification('⚠️ Compila tutti i campi obbligatori!', 'warning');
                return;
            }
            
            const newEvent = {
                id: Date.now(),
                title,
                date,
                time,
                location,
                description,
                participants: 0,
                createdBy: currentUser.email
            };
            
            events.push(newEvent);
            document.getElementById('eventForm').reset();
            showNotification(`🎉 Evento "${title}" creato con successo!`, 'success');
            
            setTimeout(() => {
                document.getElementById('admin-agenda').checked = true;
            }, 2000);
        }

        function deleteEvent(eventId) {
            if (currentUser.role !== 'admin') return;
            
            const eventIndex = events.findIndex(e => e.id === eventId);
            if (eventIndex > -1) {
                events.splice(eventIndex, 1);
                showNotification('🗑️ Evento eliminato con successo', 'success');
                loadAdminAgenda();
            }
        }

        function loadMembersPage() {
            const container = document.getElementById('membersContainer');
            container.innerHTML = '';
            
            Object.entries(users).forEach(([key, user]) => {
                if (user.role === 'member') {
                    const statusClass = user.status === 'active' ? 'status-active' : 
                                       user.status === 'pending' ? 'status-pending' : 'status-suspended';
                    
                    container.innerHTML += `
                        <div class="member-card">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                <div style="flex: 1;">
                                    <h3 style="color: #2c3e50; margin-bottom: 5px;">${user.name}</h3>
                                    <p style="color: #7f8c8d; margin-bottom: 5px;">${user.company}</p>
                                    <p style="color: #95a5a6; font-size: 12px;">📧 ${user.email}</p>
                                    <p style="color: #95a5a6; font-size: 12px;">📅 Iscritto: ${user.joinDate}</p>
                                </div>
                                <div style="text-align: right;">
                                    <span class="status-badge ${statusClass}">${user.status.toUpperCase()}</span>
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                <button class="impersonate-btn" onclick="impersonateMember('${key}')">👁️ Visualizza come</button>
                                <button class="action-btn blue" onclick="editMember('${key}')">✏️ Modifica</button>
                                <button class="action-btn red" onclick="deleteMember('${key}')">🗑️ Elimina</button>
                            </div>
                        </div>
                    `;
                }
            });
        }

        function loadAdminAgenda() {
            const container = document.getElementById('adminEventsContainer');
            container.innerHTML = '';
            
            events.forEach(event => {
                container.innerHTML += `
                    <div class="event-item">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
                            <div>
                                <div class="event-date">${event.date}</div>
                                <h3 style="color: #2c3e50; margin-bottom: 5px;">${event.title}</h3>
                                <p style="color: #7f8c8d; font-size: 13px;">🕙 ${event.time} - ${event.location}</p>
                                <p style="color: #34495e; font-size: 13px;">${event.description}</p>
                            </div>
                            <div style="text-align: right;">
                                <div style="background: #3498db; color: white; padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: bold; margin-bottom: 5px;">
                                    👥 ${event.participants} partecipanti
                                </div>
                                <button class="action-btn red" onclick="deleteEvent(${event.id})" style="font-size: 11px; padding: 5px 10px;">🗑️ Elimina</button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        function loadMemberAgenda() {
            const container = document.getElementById('memberEventsContainer');
            container.innerHTML = '';
            
            events.forEach(event => {
                container.innerHTML += `
                    <div class="event-item">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <div class="event-date">${event.date}</div>
                            <div style="background: #3498db; color: white; padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: bold;">
                                👥 ${event.participants} partecipanti
                            </div>
                        </div>
                        <div style="font-weight: bold; margin-bottom: 5px; color: #2c3e50;">${event.title}</div>
                        <div style="color: #6c757d; font-size: 13px; margin-bottom: 10px;">🕙 ${event.time} - ${event.location}<br>${event.description}</div>
                        
                        <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                            <button class="action-btn">✅ Parteciperò</button>
                            <button class="action-btn red">❌ Non parteciperò</button>
                        </div>
                    </div>
                `;
            });
        }

        function showNotification(message, type) {
            const colors = {
                success: '#27ae60',
                error: '#e74c3c',
                warning: '#f39c12'
            };
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; 
                top: 20px; 
                right: 20px; 
                background: ${colors[type]}; 
                color: white; 
                padding: 15px; 
                border-radius: 10px; 
                z-index: 1000; 
                animation: slideIn 0.5s ease;
                max-width: 300px;
                font-size: 14px;
            `;
            notification.innerHTML = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Inizializza la pagina
        window.onload = function() {
            switchLoginTab('admin');
        };
    </script>
</head>
<body>
    <div class="app-container">
        <!-- Navigation Inputs -->
        <input type="radio" name="nav" id="login" class="nav-input" checked>
        <input type="radio" name="nav" id="admin-dashboard" class="nav-input">
        <input type="radio" name="nav" id="member-dashboard" class="nav-input">
        <input type="radio" name="nav" id="admin-agenda" class="nav-input">
        <input type="radio" name="nav" id="admin-membri" class="nav-input">
        <input type="radio" name="nav" id="admin-nuovo-evento" class="nav-input">
        <input type="radio" name="nav" id="member-agenda" class="nav-input">
        <input type="radio" name="nav" id="albo" class="nav-input">
        <input type="radio" name="nav" id="bacheca" class="nav-input">
        <input type="radio" name="nav" id="video" class="nav-input">
        <input type="radio" name="nav" id="convenzioni" class="nav-input">
        <input type="radio" name="nav" id="consulenti" class="nav-input">
        <input type="radio" name="nav" id="progetti" class="nav-input">
        <input type="radio" name="nav" id="nuova-convenzione" class="nav-input">

        <div class="pages">
            <!-- Login Page -->
            <div id="loginPage" class="page">
                <div class="header">
                    <div class="logo">🏢</div>
                    <h1>Consorzio Imprenditori</h1>
                    <p>Riuniamo imprenditori allo scopo di collaborare e crescere insieme</p>
                </div>
                
                <div class="login-container">
                    <h2 style="text-align: center; margin-bottom: 25px; color: #2c3e50;">Accedi al Consorzio</h2>
                    
                    <div class="login-tabs">
                        <div class="login-tab admin" onclick="switchLoginTab('admin')">
                            🔐 AMMINISTRATORI
                        </div>
                        <div class="login-tab member" onclick="switchLoginTab('member')">
                            👥 MEMBRI
                        </div>
                    </div>

                    <!-- Admin Login Form -->
                    <div id="adminForm" class="login-form">
                        <div class="form-group">
                            <label>Email Amministratore</label>
                            <input type="email" id="adminEmail" value="admin@consorzio.it">
                        </div>
                        
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="adminPassword" value="admin123">
                        </div>
                        
                        <button class="btn" onclick="login('admin')" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">🔑 ACCESSO AMMINISTRATORE</button>
                    </div>

                    <!-- Member Login Form -->
                    <div id="memberForm" class="login-form">
                        <div class="form-group">
                            <label>Email Membro</label>
                            <input type="email" id="memberEmail" value="rossi@rossisrl.it">
                        </div>
                        
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="memberPassword" value="member123">
                        </div>
                        
                        <button class="btn" onclick="login('member')" style="background: linear-gradient(135deg, #27ae60, #229954);">🔑 ACCESSO MEMBRO</button>
                        
                        <div style="background: #e8f5e8; padding: 12px; margin-top: 15px; border-radius: 8px; border-left: 4px solid #27ae60;">
                            <h4 style="color: #2c3e50; margin-bottom: 8px;">👥 Credenziali di prova:</h4>
                            <p style="color: #34495e; font-size: 12px;">Email: rossi@rossisrl.it | Pass: member123</p>
                        </div>
                    </div>
                    
                    <div style="background: #e8f5e8; padding: 12px; margin-top: 15px; border-radius: 8px; border-left: 4px solid #3498db;">
                        <h4 style="color: #2c3e50; margin-bottom: 8px;">🎯 Sistema Dual-Panel</h4>
                        <p style="color: #34495e; font-size: 12px;">✅ Pannello Admin: Gestione completa + Impersonificazione</p>
                        <p style="color: #34495e; font-size: 12px;">✅ Pannello Membri: Vista limitata alle proprie funzioni</p>
                    </div>
                </div>
            </div>

            <!-- Admin Dashboard Page -->
            <div id="adminDashboardPage" class="page">
                <div class="header">
                    <button onclick="logout()" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">Logout</button>
                    <div class="user-info">👤 Amministratore</div>
                    <div class="logo">🔐</div>
                    <h1>Dashboard Amministratori</h1>
                    <p>Pannello di controllo completo del Consorzio</p>
                    <div style="margin-top: 10px;">
                        <button onclick="stopImpersonating()" id="stopImpersonateBtn" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 11px; display: none;">🔄 Torna alla vista Admin</button>
                    </div>
                </div>

                <div class="main-content">
                    <div class="admin-stats-box">
                        <h2 style="margin-bottom: 10px;">🔐 Controllo Totale Consorzio</h2>
                        <div style="display: flex; justify-content: center; gap: 25px; margin-top: 10px; flex-wrap: wrap;">
                            <div><div style="font-size: 20px; font-weight: bold;">3</div><div style="font-size: 11px;">Membri Attivi</div></div>
                            <div><div style="font-size: 20px; font-weight: bold;">3</div><div style="font-size: 11px;">Eventi Pianificati</div></div>
                            <div><div style="font-size: 20px; font-weight: bold;">8</div><div style="font-size: 11px;">Sezioni Gestite</div></div>
                        </div>
                    </div>
                    
                    <div class="dashboard-grid">
                        <label for="admin-agenda" class="nav-btn admin">
                            <div class="notification-dot">3</div>
                            <div class="card-icon">📅</div>
                            <div class="card-title">GESTIONE AGENDA</div>
                        </label>

                        <label for="admin-membri" class="nav-btn admin">
                            <div class="notification-dot">3</div>
                            <div class="card-icon">👥</div>
                            <div class="card-title">GESTIONE MEMBRI</div>
                        </label>

                        <label for="albo" class="nav-btn admin">
                            <div class="card-icon">📋</div>
                            <div class="card-title">ALBO ISCRITTI</div>
                        </label>

                        <label for="bacheca" class="nav-btn admin">
                            <div class="card-icon">📌</div>
                            <div class="card-title">BACHECA</div>
                        </label>

                        <label for="video" class="nav-btn admin">
                            <div class="card-icon">📹</div>
                            <div class="card-title">VIDEO</div>
                        </label>

                        <label for="convenzioni" class="nav-btn admin">
                            <div class="card-icon">🤝</div>
                            <div class="card-title">CONVENZIONI</div>
                        </label>

                        <label for="consulenti" class="nav-btn admin">
                            <div class="card-icon">💼</div>
                            <div class="card-title">CONSULENTI</div>
                        </label>

                        <label for="progetti" class="nav-btn admin">
                            <div class="card-icon">🚀</div>
                            <div class="card-title">PROGETTI</div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Member Dashboard Page -->
            <div id="memberDashboardPage" class="page">
                <div class="header">
                    <button onclick="isImpersonating ? stopImpersonating() : logout()" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">🔙 Esci</button>
                    <div class="user-info">👤 Membro</div>
                    <div class="logo">👥</div>
                    <h1>Dashboard Membri</h1>
                    <p>Benvenuto nella piattaforma riservata ai membri</p>
                </div>

                <div class="main-content">
                    <div class="member-stats-box">
                        <h2 style="margin-bottom: 10px;">👥 Area Riservata Membri</h2>
                        <div style="display: flex; justify-content: center; gap: 25px; margin-top: 10px; flex-wrap: wrap;">
                            <div><div style="font-size: 20px; font-weight: bold;">3</div><div style="font-size: 11px;">Eventi Disponibili</div></div>
                            <div><div style="font-size: 20px; font-weight: bold;">8</div><div style="font-size: 11px;">Consulenti</div></div>
                            <div><div style="font-size: 20px; font-weight: bold;">2</div><div style="font-size: 11px;">Convenzioni Attive</div></div>
                        </div>
                    </div>
                    
                    <div class="dashboard-grid">
                        <label for="member-agenda" class="nav-btn member">
                            <div class="notification-dot">3</div>
                            <div class="card-icon">📅</div>
                            <div class="card-title">AGENDA EVENTI</div>
                        </label>

                        <label for="albo" class="nav-btn member">
                            <div class="card-icon">📋</div>
                            <div class="card-title">ALBO MEMBRI</div>
                        </label>

                        <label for="bacheca" class="nav-btn member">
                            <div class="card-icon">📌</div>
                            <div class="card-title">BACHECA</div>
                        </label>

                        <label for="video" class="nav-btn member">
                            <div class="card-icon">📹</div>
                            <div class="card-title">VIDEO</div>
                        </label>

                        <label for="convenzioni" class="nav-btn member">
                            <div class="card-icon">🤝</div>
                            <div class="card-title">CONVENZIONI</div>
                        </label>

                        <label for="consulenti" class="nav-btn member">
                            <div class="card-icon">💼</div>
                            <div class="card-title">CONSULENTI</div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Admin Agenda Page -->
            <div id="adminAgendaPage" class="page">
                <div class="header">
                    <label for="admin-dashboard" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">← Dashboard</label>
                    <div class="user-info">👤 Admin</div>
                    <div class="logo">📅</div>
                    <h1>Gestione Agenda (Admin)</h1>
                </div>
                <div class="page-content">
                    
                    <div style="background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; padding: 20px; border-radius: 10px; text-align: center; margin-bottom: 20px;">
                        <h2 style="margin-bottom: 10px;">📅 Controllo Totale Eventi</h2>
                        <div style="display: flex; justify-content: center; gap: 25px; margin-top: 10px; flex-wrap: wrap;">
                            <div><div style="font-size: 20px; font-weight: bold;" id="totalEvents">3</div><div style="font-size: 11px;">Eventi Totali</div></div>
                            <div><div style="font-size: 20px; font-weight: bold;">47</div><div style="font-size: 11px;">Partecipanti</div></div>
                            <div><div style="font-size: 20px; font-weight: bold;">1</div><div style="font-size: 11px;">Questo Mese</div></div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                        <label for="admin-nuovo-evento" class="action-btn">🆕 Crea Nuovo Evento</label>
                        <button class="action-btn blue" onclick="loadAdminAgenda()">🔄 Aggiorna Lista</button>
                    </div>
                    
                    <div id="adminEventsContainer">
                        <!-- Gli eventi vengono caricati dinamicamente -->
                    </div>
                </div>
            </div>

            <!-- Admin Nuovo Evento Page -->
            <div id="adminNuovoEventoPage" class="page">
                <div class="header">
                    <label for="admin-agenda" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">← Agenda</label>
                    <div class="user-info">👤 Admin</div>
                    <div class="logo">🆕</div>
                    <h1>Crea Nuovo Evento</h1>
                </div>
                <div class="page-content">
                    <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto;">
                        <h2 style="color: #2c3e50; margin-bottom: 20px; text-align: center; font-size: 20px;">📅 Nuovo Evento del Consorzio</h2>
                        
                        <form id="eventForm">
                            <div class="form-group">
                                <label>🎯 Titolo Evento</label>
                                <input type="text" id="eventTitle" placeholder="Es: Workshop Innovazione Digitale" required>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div class="form-group">
                                    <label>📅 Data</label>
                                    <input type="date" id="eventDate" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>🕙 Orario</label>
                                    <input type="time" id="eventTime" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>📍 Luogo</label>
                                <input type="text" id="eventLocation" placeholder="Es: Sede del Consorzio" required>
                            </div>
                            
                            <div class="form-group">
                                <label>📝 Descrizione</label>
                                <textarea id="eventDescription" placeholder="Descrivi l'evento..." style="min-height: 100px;" required></textarea>
                            </div>
                            
                            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
                                <button type="button" onclick="createEvent()" class="action-btn">✅ Crea Evento</button>
                                <label for="admin-agenda" class="action-btn" style="background: linear-gradient(135deg, #95a5a6, #7f8c8d); cursor: pointer;">❌ Annulla</label>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Admin Membri Page -->
            <div id="adminMembriPage" class="page">
                <div class="header">
                    <label for="admin-dashboard" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">← Dashboard</label>
                    <div class="user-info">👤 Admin</div>
                    <div class="logo">👥</div>
                    <h1>Gestione Membri (Admin)</h1>
                </div>
                <div class="page-content">
                    
                    <div style="background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; padding: 20px; border-radius: 10px; text-align: center; margin-bottom: 20px;">
                        <h2 style="margin-bottom: 10px;">👥 Controllo Totale Membri</h2>
                        <div style="display: flex; justify-content: center; gap: 25px; margin-top: 10px; flex-wrap: wrap;">
                            <div><div style="font-size: 20px; font-weight: bold;">3</div><div style="font-size: 11px;">Membri Totali</div></div>
                            <div><div style="font-size: 20px; font-weight: bold;">2</div><div style="font-size: 11px;">Attivi</div></div>
                            <div><div style="font-size: 20px; font-weight: bold;">1</div><div style="font-size: 11px;">In Attesa</div></div>
                        </div>
                    </div>

                    <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 12px; border-radius: 8px; margin-bottom: 15px; font-size: 14px;">
                        <strong>🔐 Funzioni Admin:</strong> Puoi visualizzare come qualsiasi membro e gestire i loro account
                    </div>

                    <button class="action-btn blue" onclick="loadMembersPage()" style="margin-bottom: 20px;">🔄 Aggiorna Lista Membri</button>
                    
                    <div id="membersContainer">
                        <!-- I membri vengono caricati dinamicamente -->
                    </div>
                </div>
            </div>

            <!-- Member Agenda Page -->
            <div id="memberAgendaPage" class="page">
                <div class="header">
                    <label for="member-dashboard" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">← Dashboard</label>
                    <div class="user-info">👤 Membro</div>
                    <div class="logo">📅</div>
                    <h1>Agenda Eventi</h1>
                </div>
                <div class="page-content">
                    
                    <div style="background: linear-gradient(135deg, #27ae60, #229954); color: white; padding: 20px; border-radius: 10px; text-align: center; margin-bottom: 20px;">
                        <h2 style="margin-bottom: 10px;">📅 Eventi del Consorzio</h2>
                        <div style="display: flex; justify-content: center; gap: 25px; margin-top: 10px; flex-wrap: wrap;">
                            <div><div style="font-size: 20px; font-weight: bold;">3</div><div style="font-size: 11px;">Eventi Disponibili</div></div>
                            <div><div style="font-size: 20px; font-weight: bold;">1</div><div style="font-size: 11px;">Questo Mese</div></div>
                            <div><div style="font-size: 20px; font-weight: bold;">47</div><div style="font-size: 11px;">Partecipanti Totali</div></div>
                        </div>
                    </div>

                    <button class="action-btn" onclick="loadMemberAgenda()" style="margin-bottom: 20px;">🔄 Aggiorna Eventi</button>
                    
                    <div id="memberEventsContainer">
                        <!-- Gli eventi vengono caricati dinamicamente -->
                    </div>
                </div>
            </div>

            <!-- Altre pagine rimangono invariate -->
            <div id="alboPage" class="page">
                <div class="header">
                    <button onclick="currentUser.role === 'admin' ? (document.getElementById('admin-dashboard').checked = true) : (document.getElementById('member-dashboard').checked = true)" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">← Dashboard</button>
                    <div class="user-info">👤 User</div>
                    <div class="logo">👥</div>
                    <h1>Albo Iscritti</h1>
                </div>
                <div class="page-content">
                    
                    <div class="stats-box">
                        <h2>👥 Directory Aziende Associate</h2>
                        <div style="display: flex; justify-content: center; gap: 30px; margin-top: 15px; flex-wrap: wrap;">
                            <div><div style="font-size: 24px; font-weight: bold;">4</div><div style="font-size: 12px;">Aziende</div></div>
                            <div><div style="font-size: 24px; font-weight: bold;">96</div><div style="font-size: 12px;">Dipendenti</div></div>
                            <div><div style="font-size: 24px; font-weight: bold;">€9.3M</div><div style="font-size: 12px;">Fatturato</div></div>
                        </div>
                    </div>

                    <div class="card">
                        <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 15px;">
                            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #007bff, #0056b3); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 24px;">R</div>
                            <div style="flex: 1;">
                                <h3 style="color: #2c3e50; margin-bottom: 5px;">Rossi SRL - Tecnologia</h3>
                                <p style="color: #6c757d; font-size: 14px;">📍 Milano | 👥 24 dipendenti | €2.1M</p>
                                <p style="color: #6c757d; font-size: 13px;">Sviluppo software, consulenza IT, digitalizzazione processi</p>
                            </div>
                            <a href="https://wa.me/393481234567?text=Ciao,%20sono%20interessato%20ai%20servizi%20di%20Rossi%20SRL" class="whatsapp-btn">💬 WhatsApp</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Placeholder per altre pagine -->
            <div id="bachecaPage" class="page">
                <div class="header">
                    <button onclick="currentUser.role === 'admin' ? (document.getElementById('admin-dashboard').checked = true) : (document.getElementById('member-dashboard').checked = true)" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">← Dashboard</button>
                    <div class="user-info">👤 User</div>
                    <div class="logo">📋</div>
                    <h1>Bacheca</h1>
                </div>
                <div class="page-content">
                    <h2>📋 Bacheca - In sviluppo</h2>
                    <p>Questa sezione è in fase di sviluppo.</p>
                </div>
            </div>

            <div id="videoPage" class="page">
                <div class="header">
                    <button onclick="currentUser.role === 'admin' ? (document.getElementById('admin-dashboard').checked = true) : (document.getElementById('member-dashboard').checked = true)" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">← Dashboard</button>
                    <div class="user-info">👤 User</div>
                    <div class="logo">📹</div>
                    <h1>Video Interviste</h1>
                </div>
                <div class="page-content">
                    <h2>📹 Video - In sviluppo</h2>
                    <p>Questa sezione è in fase di sviluppo.</p>
                </div>
            </div>

            <div id="convenzioniPage" class="page">
                <div class="header">
                    <button onclick="currentUser.role === 'admin' ? (document.getElementById('admin-dashboard').checked = true) : (document.getElementById('member-dashboard').checked = true)" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">← Dashboard</button>
                    <div class="user-info">👤 User</div>
                    <div class="logo">🤝</div>
                    <h1>Convenzioni</h1>
                </div>
                <div class="page-content">
                    <h2>🤝 Convenzioni - In sviluppo</h2>
                    <p>Questa sezione è in fase di sviluppo.</p>
                </div>
            </div>

            <div id="consulentiPage" class="page">
                <div class="header">
                    <button onclick="currentUser.role === 'admin' ? (document.getElementById('admin-dashboard').checked = true) : (document.getElementById('member-dashboard').checked = true)" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">← Dashboard</button>
                    <div class="user-info">👤 User</div>
                    <div class="logo">💼</div>
                    <h1>Consulenti</h1>
                </div>
                <div class="page-content">
                    <h2>💼 Consulenti - In sviluppo</h2>
                    <p>Questa sezione è in fase di sviluppo.</p>
                </div>
            </div>

            <div id="progettiPage" class="page">
                <div class="header">
                    <button onclick="currentUser.role === 'admin' ? (document.getElementById('admin-dashboard').checked = true) : (document.getElementById('member-dashboard').checked = true)" style="position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px;">← Dashboard</button>
                    <div class="user-info">👤 User</div>
                    <div class="logo">🚀</div>
                    <h1>Progetti</h1>
                </div>
                <div class="page-content">
                    <h2>🚀 Progetti - In sviluppo</h2>
                    <p>Questa sezione è in fase di sviluppo.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Carica i dati quando necessario
        setTimeout(() => {
            if (document.getElementById('admin-membri').checked) {
                loadMembersPage();
            }
            if (document.getElementById('admin-agenda').checked) {
                loadAdminAgenda();
            }
            if (document.getElementById('member-agenda').checked) {
                loadMemberAgenda();
            }
        }, 100);
    </script>
</body>
</html>
